{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var ChatsContext = createContext({});\nexport var ChatsProvider = function ChatsProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      loads = _useState2[0],\n      setLoads = _useState2[1];\n\n  var updateChats = function updateChats(newChats) {\n    setChats({\n      chats: newChats,\n      updateChats: updateChats\n    });\n  };\n\n  var initialValue = {\n    chats: [],\n    updateChats: updateChats\n  };\n\n  var _useState3 = useState(initialValue),\n      _useState4 = _slicedToArray(_useState3, 2),\n      chats = _useState4[0],\n      setChats = _useState4[1];\n\n  useEffect(function () {\n    AsyncStorage.getItem(\"chats\").then(function (data) {\n      var dt = JSON.parse(data);\n\n      if (dt) {\n        updateChats(dt);\n      } else updateChats(initialValue);\n    });\n  }, []);\n  useEffect(function () {\n    if (chats !== initialValue) {\n      AsyncStorage.setItem(\"chats\", JSON.stringify(chats));\n    }\n\n    setLoads(loads + 1);\n  }, [chats]);\n  if (loads === 0) return;\n  return _jsx(ChatsContext.Provider, {\n    value: chats,\n    children: children\n  });\n};","map":{"version":3,"names":["createContext","useEffect","useState","AsyncStorage","ChatsContext","ChatsProvider","children","loads","setLoads","updateChats","newChats","setChats","chats","initialValue","getItem","then","data","dt","JSON","parse","setItem","stringify"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/src/contexts/chats.tsx"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\ninterface ChatsInterface {\n  chats: Array;\n  updateUser: Function;\n}\n\nexport const ChatsContext = createContext<ChatsInterface>({} as ChatsInterface);\n\nexport const ChatsProvider = ({ children }: any) => {\n  const [loads, setLoads] = useState(0);\n\n  const updateChats = (newChats: any) => {\n    setChats({\n      chats: newChats,\n      updateChats: updateChats,\n    });\n  };\n\n  const initialValue: ChatsInterface = {\n    chats: [],\n    updateChats: updateChats,\n  };\n\n  const [chats, setChats] = useState<ChatsInterface>(initialValue);\n\n  useEffect(() => {\n    AsyncStorage.getItem(\"chats\").then((data: any) => {\n      const dt = JSON.parse(data);\n\n      if (dt) {\n        updateChats(dt);\n      } else updateChats(initialValue);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (chats !== initialValue) {\n      AsyncStorage.setItem(\"chats\", JSON.stringify(chats));\n    }\n    setLoads(loads + 1);\n  }, [chats]);\n\n  if (loads === 0) return;\n\n  return (\n    <ChatsContext.Provider value={chats}>\n      {children}\n    </ChatsContext.Provider>\n  );\n};\n"],"mappings":";AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;AAOA,OAAO,IAAMC,YAAY,GAAGJ,aAAa,CAAiB,EAAjB,CAAlC;AAEP,OAAO,IAAMK,aAAa,GAAG,SAAhBA,aAAgB,OAAuB;EAAA,IAApBC,QAAoB,QAApBA,QAAoB;;EAClD,gBAA0BJ,QAAQ,CAAC,CAAD,CAAlC;EAAA;EAAA,IAAOK,KAAP;EAAA,IAAcC,QAAd;;EAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,QAAD,EAAmB;IACrCC,QAAQ,CAAC;MACPC,KAAK,EAAEF,QADA;MAEPD,WAAW,EAAEA;IAFN,CAAD,CAAR;EAID,CALD;;EAOA,IAAMI,YAA4B,GAAG;IACnCD,KAAK,EAAE,EAD4B;IAEnCH,WAAW,EAAEA;EAFsB,CAArC;;EAKA,iBAA0BP,QAAQ,CAAiBW,YAAjB,CAAlC;EAAA;EAAA,IAAOD,KAAP;EAAA,IAAcD,QAAd;;EAEAV,SAAS,CAAC,YAAM;IACdE,YAAY,CAACW,OAAb,CAAqB,OAArB,EAA8BC,IAA9B,CAAmC,UAACC,IAAD,EAAe;MAChD,IAAMC,EAAE,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAX;;MAEA,IAAIC,EAAJ,EAAQ;QACNR,WAAW,CAACQ,EAAD,CAAX;MACD,CAFD,MAEOR,WAAW,CAACI,YAAD,CAAX;IACR,CAND;EAOD,CARQ,EAQN,EARM,CAAT;EAUAZ,SAAS,CAAC,YAAM;IACd,IAAIW,KAAK,KAAKC,YAAd,EAA4B;MAC1BV,YAAY,CAACiB,OAAb,CAAqB,OAArB,EAA8BF,IAAI,CAACG,SAAL,CAAeT,KAAf,CAA9B;IACD;;IACDJ,QAAQ,CAACD,KAAK,GAAG,CAAT,CAAR;EACD,CALQ,EAKN,CAACK,KAAD,CALM,CAAT;EAOA,IAAIL,KAAK,KAAK,CAAd,EAAiB;EAEjB,OACE,KAAC,YAAD,CAAc,QAAd;IAAuB,KAAK,EAAEK,KAA9B;IAAA,UACGN;EADH,EADF;AAKD,CAzCM"},"metadata":{},"sourceType":"module"}