{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"size\", \"borderRadius\", \"name\", \"email\", \"colorize\", \"source\", \"defaultSource\", \"style\", \"textStyle\", \"imageStyle\", \"badge\", \"badgeColor\", \"badgeProps\", \"badgePosition\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport md5 from 'js-md5';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport PixelRatio from \"react-native-web/dist/exports/PixelRatio\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Badge } from \"./Badge\";\nimport { getInitials, getStringColor, getRadius, useLayout, colorScheme } from \"./helpers\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var Userpic = function Userpic(_ref) {\n  var _ref$size = _ref.size,\n    size = _ref$size === void 0 ? 50 : _ref$size,\n    _ref$borderRadius = _ref.borderRadius,\n    borderRadius = _ref$borderRadius === void 0 ? '50%' : _ref$borderRadius,\n    name = _ref.name,\n    email = _ref.email,\n    _ref$colorize = _ref.colorize,\n    colorize = _ref$colorize === void 0 ? false : _ref$colorize,\n    source = _ref.source,\n    _ref$defaultSource = _ref.defaultSource,\n    defaultSource = _ref$defaultSource === void 0 ? require(\"./assets/default.png\") : _ref$defaultSource,\n    style = _ref.style,\n    textStyle = _ref.textStyle,\n    imageStyle = _ref.imageStyle,\n    badge = _ref.badge,\n    badgeColor = _ref.badgeColor,\n    badgeProps = _ref.badgeProps,\n    _ref$badgePosition = _ref.badgePosition,\n    badgePosition = _ref$badgePosition === void 0 ? 'top-right' : _ref$badgePosition,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var getImageSource = useCallback(function () {\n    if (source) {\n      return source;\n    } else if (email) {\n      var emailHash = md5(email.toLowerCase().trim());\n      var pixelSize = PixelRatio.getPixelSizeForLayoutSize(size);\n      return {\n        uri: \"https://www.gravatar.com/avatar/\" + emailHash + \"?s=\" + pixelSize + \"&d=404\"\n      };\n    }\n    return defaultSource;\n  }, [source, email, size, defaultSource]);\n  var _useLayout = useLayout({\n      height: 10\n    }),\n    _useLayout2 = _slicedToArray(_useLayout, 2),\n    badgeHeight = _useLayout2[0].height,\n    onBadgeLayout = _useLayout2[1];\n  var _useLayout3 = useLayout({\n      height: size\n    }),\n    _useLayout4 = _slicedToArray(_useLayout3, 2),\n    imageHeight = _useLayout4[0].height,\n    onImageLayout = _useLayout4[1];\n  var _useState = useState(getImageSource),\n    _useState2 = _slicedToArray(_useState, 2),\n    imageSource = _useState2[0],\n    setImageSource = _useState2[1];\n  useEffect(function () {\n    setImageSource(getImageSource());\n  }, [getImageSource, setImageSource]);\n  var onError = useCallback(function () {\n    return setImageSource(defaultSource);\n  }, [defaultSource]);\n  var initials = useMemo(function () {\n    return name && imageSource === defaultSource && {\n      color: colorize ? getStringColor(name) : undefined,\n      text: getInitials(name)\n    };\n  }, [name, colorize, imageSource, defaultSource]);\n  var radius = getRadius(borderRadius, size);\n  var badgeOffset = useMemo(function () {\n    var selfOffset = badgeHeight * (0.25 + radius / (size * 2));\n    var edgeOffset = radius * (1 - Math.sin(45 * Math.PI / 180));\n    return PixelRatio.roundToNearestPixel(edgeOffset - selfOffset);\n  }, [badgeHeight, radius, size]);\n  var rootStyles = [{\n    width: size,\n    height: size,\n    borderRadius: radius\n  }, styles.root, style];\n  var content = [];\n  if (initials) {\n    var fontSize = PixelRatio.roundToNearestPixel(size / 2.5);\n    content.push(_jsx(Text, {\n      style: [{\n        fontSize: fontSize\n      }, styles.text, textStyle],\n      numberOfLines: 1,\n      children: initials.text\n    }, \"text\"));\n    if (initials.color) {\n      rootStyles.push({\n        backgroundColor: initials.color\n      });\n    }\n  } else {\n    var imageRadius = radius - (size - imageHeight) / 2;\n    content.push(_jsx(Image, {\n      style: [{\n        borderRadius: imageRadius\n      }, styles.image, imageStyle],\n      source: imageSource,\n      onLayout: onImageLayout,\n      onError: onError\n    }, \"image\"));\n  }\n  if (badge) {\n    var _ref2;\n    var _badgePosition$split = badgePosition.split('-'),\n      _badgePosition$split2 = _slicedToArray(_badgePosition$split, 2),\n      badgeY = _badgePosition$split2[0],\n      badgeX = _badgePosition$split2[1];\n    var badgeStyles = [(_ref2 = {}, _defineProperty(_ref2, badgeY, badgeOffset), _defineProperty(_ref2, badgeX, badgeOffset), _ref2), styles.badge, badgeProps == null ? void 0 : badgeProps.style];\n    content.push(_jsx(Badge, _objectSpread(_objectSpread({\n      value: badge,\n      color: badgeColor\n    }, badgeProps), {}, {\n      style: badgeStyles,\n      onLayout: onBadgeLayout\n    }), \"badge\"));\n  }\n  return _jsx(View, _objectSpread(_objectSpread({}, props), {}, {\n    style: rootStyles,\n    children: content\n  }));\n};\nvar styles = StyleSheet.create({\n  root: {\n    alignSelf: 'center',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: colorScheme('#aeaeb2', '#636366')\n  },\n  image: {\n    width: '100%',\n    height: '100%'\n  },\n  text: {\n    fontWeight: '700',\n    fontFamily: 'System',\n    includeFontPadding: false,\n    textAlignVertical: 'center',\n    backgroundColor: 'transparent',\n    color: '#fff'\n  },\n  badge: {\n    zIndex: 1,\n    position: 'absolute',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 1,\n    elevation: 1\n  }\n});","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","md5","Badge","getInitials","getStringColor","getRadius","useLayout","colorScheme","Userpic","size","borderRadius","name","email","colorize","source","defaultSource","require","style","textStyle","imageStyle","badge","badgeColor","badgeProps","badgePosition","props","getImageSource","emailHash","toLowerCase","trim","pixelSize","PixelRatio","getPixelSizeForLayoutSize","uri","height","badgeHeight","onBadgeLayout","imageHeight","onImageLayout","imageSource","setImageSource","onError","initials","color","undefined","text","radius","badgeOffset","selfOffset","edgeOffset","Math","sin","PI","roundToNearestPixel","rootStyles","width","styles","root","content","fontSize","push","backgroundColor","imageRadius","image","split","badgeY","badgeX","badgeStyles","StyleSheet","create","alignSelf","alignItems","justifyContent","fontWeight","fontFamily","includeFontPadding","textAlignVertical","zIndex","position","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/node_modules/react-native-userpic/src/Userpic.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport md5 from 'js-md5';\nimport {\n  Image,\n  ImageStyle,\n  ImageSourcePropType,\n  PixelRatio,\n  StyleSheet,\n  StyleProp,\n  Text,\n  TextStyle,\n  View,\n  ViewProps,\n  ViewStyle,\n} from 'react-native';\n\nimport { Badge, BadgeProps } from './Badge';\nimport { getInitials, getStringColor, getRadius, useLayout, colorScheme } from './helpers';\n\nexport interface UserpicProps extends ViewProps {\n  size?: number;\n  borderRadius?: number | string;\n  name?: string;\n  email?: string;\n  colorize?: boolean;\n  source?: ImageSourcePropType;\n  defaultSource?: ImageSourcePropType;\n  style?: StyleProp<ViewStyle>;\n  textStyle?: StyleProp<TextStyle>;\n  imageStyle?: StyleProp<ImageStyle>;\n  badge?: BadgeProps['value'];\n  badgeColor?: BadgeProps['color'];\n  badgeProps?: Omit<BadgeProps, 'value' | 'color'>;\n  badgePosition?: 'top-right' | 'bottom-right' | 'bottom-left' | 'top-left';\n}\n\nexport const Userpic: React.FC<UserpicProps> = ({\n  size = 50,\n  borderRadius = '50%',\n  name,\n  email,\n  colorize = false,\n  source,\n  defaultSource = require('./assets/default.png'),\n  style,\n  textStyle,\n  imageStyle,\n  badge,\n  badgeColor,\n  badgeProps,\n  badgePosition = 'top-right',\n  ...props\n}) => {\n  const getImageSource = useCallback(() => {\n    if (source) {\n      return source;\n    } else if (email) {\n      const emailHash = md5(email.toLowerCase().trim());\n      const pixelSize = PixelRatio.getPixelSizeForLayoutSize(size);\n\n      return { uri: `https://www.gravatar.com/avatar/${emailHash}?s=${pixelSize}&d=404` };\n    }\n\n    return defaultSource;\n  }, [source, email, size, defaultSource]);\n\n  const [{ height: badgeHeight }, onBadgeLayout] = useLayout({ height: 10 });\n  const [{ height: imageHeight }, onImageLayout] = useLayout({ height: size });\n  const [imageSource, setImageSource] = useState(getImageSource);\n\n  useEffect(() => {\n    setImageSource(getImageSource());\n  }, [getImageSource, setImageSource]);\n\n  const onError = useCallback(() => setImageSource(defaultSource), [defaultSource]);\n\n  const initials = useMemo(\n    () =>\n      name &&\n      imageSource === defaultSource && {\n        color: colorize ? getStringColor(name) : undefined,\n        text: getInitials(name),\n      },\n    [name, colorize, imageSource, defaultSource],\n  );\n\n  const radius = getRadius(borderRadius, size);\n\n  const badgeOffset = useMemo(() => {\n    // We want to place the badge at the point with polar coordinates (r,45°)\n    // thus we need to find the distance from the containing square top right corner\n    // which can be calculated as x = r - r × sin(45°)\n    // Self offset is how much we’ll shift the badge from the edge point,\n    // its value ranges from badgeHeight / 4 (square) to badgeHeight / 2 (circle)\n    const selfOffset = badgeHeight * (0.25 + radius / (size * 2));\n    const edgeOffset = radius * (1 - Math.sin((45 * Math.PI) / 180));\n\n    return PixelRatio.roundToNearestPixel(edgeOffset - selfOffset);\n  }, [badgeHeight, radius, size]);\n\n  const rootStyles = [\n    {\n      width: size,\n      height: size,\n      borderRadius: radius,\n    },\n    styles.root,\n    style,\n  ];\n\n  let content = [];\n\n  if (initials) {\n    const fontSize = PixelRatio.roundToNearestPixel(size / 2.5);\n\n    content.push(\n      <Text key=\"text\" style={[{ fontSize }, styles.text, textStyle]} numberOfLines={1}>\n        {initials.text}\n      </Text>,\n    );\n\n    if (initials.color) {\n      rootStyles.push({ backgroundColor: initials.color });\n    }\n  } else {\n    const imageRadius = radius - (size - imageHeight) / 2;\n\n    content.push(\n      <Image\n        key=\"image\"\n        style={[{ borderRadius: imageRadius }, styles.image, imageStyle]}\n        source={imageSource}\n        onLayout={onImageLayout}\n        onError={onError}\n      />,\n    );\n  }\n\n  if (badge) {\n    const [badgeY, badgeX] = badgePosition.split('-');\n    const badgeStyles = [\n      {\n        [badgeY]: badgeOffset,\n        [badgeX]: badgeOffset,\n      },\n      styles.badge,\n      badgeProps?.style,\n    ];\n\n    content.push(\n      <Badge\n        key=\"badge\"\n        value={badge}\n        color={badgeColor}\n        {...badgeProps}\n        style={badgeStyles}\n        onLayout={onBadgeLayout}\n      />,\n    );\n  }\n\n  return (\n    <View {...props} style={rootStyles}>\n      {content}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {\n    alignSelf: 'center',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: colorScheme('#aeaeb2', '#636366'),\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n  },\n  text: {\n    fontWeight: '700',\n    fontFamily: 'System',\n    includeFontPadding: false,\n    textAlignVertical: 'center',\n    backgroundColor: 'transparent',\n    color: '#fff',\n  },\n  badge: {\n    zIndex: 1,\n    position: 'absolute',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.2,\n    shadowRadius: 1,\n    elevation: 1,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}