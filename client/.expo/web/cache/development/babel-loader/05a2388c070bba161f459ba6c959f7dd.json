{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport io from 'socket.io-client';\nimport * as dotenv from 'dotenv';\nimport * as uuid from 'uuid';\ndotenv.config();\n\nvar Socket = function () {\n  function Socket() {\n    _classCallCheck(this, Socket);\n\n    this.socket = io(\"http://localhost:3000\", {\n      transports: [\"websocket\"]\n    });\n  }\n\n  _createClass(Socket, [{\n    key: \"get\",\n    value: function get() {\n      console.log(this.socket);\n      return true;\n    }\n  }, {\n    key: \"sendMessage\",\n    value: function sendMessage(text) {\n      var message = {\n        id: uuid.v4(),\n        text: text,\n        author: {}\n      };\n      this.socket.emit(\"message\", message);\n    }\n  }, {\n    key: \"getMessages\",\n    value: function () {\n      var _getMessages = _asyncToGenerator(function* (room) {\n        var messages = [];\n        if (!room) return;\n        var cu = yield this.socket.emit(\"getMessages\", function () {\n          var _ref = _asyncToGenerator(function* (msgs) {\n            return msgs;\n          });\n\n          return function (_x2) {\n            return _ref.apply(this, arguments);\n          };\n        }()).then(function (c) {\n          return console.log(c);\n        });\n        console.log(messages);\n        new Promise([cu]).then(function (c) {\n          return console.log(c);\n        });\n        return messages;\n      });\n\n      function getMessages(_x) {\n        return _getMessages.apply(this, arguments);\n      }\n\n      return getMessages;\n    }()\n  }]);\n\n  return Socket;\n}();\n\nexport { Socket as default };","map":{"version":3,"names":["io","dotenv","uuid","config","Socket","socket","transports","console","log","text","message","id","v4","author","emit","room","messages","cu","msgs","then","c","Promise"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/src/utils/socket.ts"],"sourcesContent":["import io from 'socket.io-client';\nimport * as dotenv from 'dotenv';\nimport * as uuid from 'uuid';\ndotenv.config();\n\nexport default class Socket {\n  constructor() {\n    this.socket = io(\"http://localhost:3000\", {\n      transports: [\"websocket\"],\n    });\n  }\n\n  get() {\n    console.log(this.socket);\n    return true;\n  }\n\n  public sendMessage(text: string) {\n    const message = {\n      id: uuid.v4(),\n      text,\n      author: {},\n    };\n\n    this.socket.emit(\"message\", message);\n  }\n\n  public async getMessages(room: string) {\n    let messages = [];\n    if(!room) return;\n\n    const cu = await this.socket.emit(\"getMessages\", async(msgs) => {\n      return msgs;\n    }).then(c => console.log(c));\n\n    console.log(messages);\n\n    new Promise([cu]).then((c) => console.log(c));\n\n    return messages;\n  }\n}\n"],"mappings":";;;AAAA,OAAOA,EAAP,MAAe,kBAAf;AACA,OAAO,KAAKC,MAAZ,MAAwB,QAAxB;AACA,OAAO,KAAKC,IAAZ,MAAsB,MAAtB;AACAD,MAAM,CAACE,MAAP;;IAEqBC,M;EACnB,kBAAc;IAAA;;IACZ,KAAKC,MAAL,GAAcL,EAAE,CAAC,uBAAD,EAA0B;MACxCM,UAAU,EAAE,CAAC,WAAD;IAD4B,CAA1B,CAAhB;EAGD;;;;WAED,eAAM;MACJC,OAAO,CAACC,GAAR,CAAY,KAAKH,MAAjB;MACA,OAAO,IAAP;IACD;;;WAED,qBAAmBI,IAAnB,EAAiC;MAC/B,IAAMC,OAAO,GAAG;QACdC,EAAE,EAAET,IAAI,CAACU,EAAL,EADU;QAEdH,IAAI,EAAJA,IAFc;QAGdI,MAAM,EAAE;MAHM,CAAhB;MAMA,KAAKR,MAAL,CAAYS,IAAZ,CAAiB,SAAjB,EAA4BJ,OAA5B;IACD;;;;2CAED,WAAyBK,IAAzB,EAAuC;QACrC,IAAIC,QAAQ,GAAG,EAAf;QACA,IAAG,CAACD,IAAJ,EAAU;QAEV,IAAME,EAAE,SAAS,KAAKZ,MAAL,CAAYS,IAAZ,CAAiB,aAAjB;UAAA,6BAAgC,WAAMI,IAAN,EAAe;YAC9D,OAAOA,IAAP;UACD,CAFgB;;UAAA;YAAA;UAAA;QAAA,KAEdC,IAFc,CAET,UAAAC,CAAC;UAAA,OAAIb,OAAO,CAACC,GAAR,CAAYY,CAAZ,CAAJ;QAAA,CAFQ,CAAjB;QAIAb,OAAO,CAACC,GAAR,CAAYQ,QAAZ;QAEA,IAAIK,OAAJ,CAAY,CAACJ,EAAD,CAAZ,EAAkBE,IAAlB,CAAuB,UAACC,CAAD;UAAA,OAAOb,OAAO,CAACC,GAAR,CAAYY,CAAZ,CAAP;QAAA,CAAvB;QAEA,OAAOJ,QAAP;MACD,C;;;;;;;;;;;;;SAnCkBZ,M"},"metadata":{},"sourceType":"module"}