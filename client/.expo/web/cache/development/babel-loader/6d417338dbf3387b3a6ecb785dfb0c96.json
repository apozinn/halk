{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var SocketContext = createContext({});\nexport var SocketProvider = function SocketProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      loads = _useState2[0],\n      setLoads = _useState2[1];\n\n  var updateSocket = function updateSocket(newSocket) {\n    setSocket({\n      socket: newSocket.socket,\n      updateSocket: updateSocket\n    });\n  };\n\n  var initialValue = {\n    socket: {},\n    updateSocket: updateSocket\n  };\n\n  var _useState3 = useState(initialValue),\n      _useState4 = _slicedToArray(_useState3, 2),\n      socket = _useState4[0],\n      setSocket = _useState4[1];\n\n  useEffect(function () {\n    AsyncStorage.getItem(\"socket\").then(function (data) {\n      var dt = JSON.parse(data);\n\n      if (dt) {\n        updateSocket(dt);\n      } else updateSocket(initialValue);\n    });\n  }, []);\n  useEffect(function () {\n    return console.log(socket);\n\n    if (socket !== initialValue) {\n      AsyncStorage.setItem(\"socket\", JSON.stringify(socket));\n    }\n\n    setLoads(loads + 1);\n  }, [socket]);\n  if (loads === 0) return;\n  return _jsx(SocketContext.Provider, {\n    value: socket,\n    children: children\n  });\n};","map":{"version":3,"names":["createContext","useEffect","useState","AsyncStorage","SocketContext","SocketProvider","children","loads","setLoads","updateSocket","newSocket","setSocket","socket","initialValue","getItem","then","data","dt","JSON","parse","console","log","setItem","stringify"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/src/contexts/socket.tsx"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\ninterface SocketInterface {\n  logged: boolean;\n  socket: Object;\n  updateSocket: Function;\n}\n\nexport const SocketContext = createContext<SocketInterface>({} as SocketInterface);\n\nexport const SocketProvider = ({ children }: any) => {\n  const [loads, setLoads] = useState(0);\n\n  const updateSocket = (newSocket:any) => {\n    setSocket({\n      socket: newSocket.socket,\n      updateSocket: updateSocket,\n    });\n  };\n\n  const initialValue: SocketInterface = {\n    socket: {},\n    updateSocket: updateSocket,\n  };\n\n  const [socket, setSocket] = useState<SocketInterface>(initialValue);\n\n  useEffect(() => {\n    AsyncStorage.getItem(\"socket\").then((data: any) => {\n      const dt = JSON.parse(data);\n\n      if (dt) {\n        updateSocket(dt);\n      } else updateSocket(initialValue);\n    });\n  }, []);\n\n  useEffect(() => {\n    return console.log(socket);\n\n    if (socket !== initialValue) {\n      AsyncStorage.setItem(\"socket\", JSON.stringify(socket));\n    }\n\n    setLoads(loads + 1);\n  }, [socket]);\n\n  if (loads === 0) return;\n\n  return <SocketContext.Provider value={socket}>{children}</SocketContext.Provider>;\n};\n"],"mappings":";AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;AAQA,OAAO,IAAMC,aAAa,GAAGJ,aAAa,CAAkB,EAAlB,CAAnC;AAEP,OAAO,IAAMK,cAAc,GAAG,SAAjBA,cAAiB,OAAuB;EAAA,IAApBC,QAAoB,QAApBA,QAAoB;;EACnD,gBAA0BJ,QAAQ,CAAC,CAAD,CAAlC;EAAA;EAAA,IAAOK,KAAP;EAAA,IAAcC,QAAd;;EAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,SAAD,EAAmB;IACtCC,SAAS,CAAC;MACRC,MAAM,EAAEF,SAAS,CAACE,MADV;MAERH,YAAY,EAAEA;IAFN,CAAD,CAAT;EAID,CALD;;EAOA,IAAMI,YAA6B,GAAG;IACpCD,MAAM,EAAE,EAD4B;IAEpCH,YAAY,EAAEA;EAFsB,CAAtC;;EAKA,iBAA4BP,QAAQ,CAAkBW,YAAlB,CAApC;EAAA;EAAA,IAAOD,MAAP;EAAA,IAAeD,SAAf;;EAEAV,SAAS,CAAC,YAAM;IACdE,YAAY,CAACW,OAAb,CAAqB,QAArB,EAA+BC,IAA/B,CAAoC,UAACC,IAAD,EAAe;MACjD,IAAMC,EAAE,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAX;;MAEA,IAAIC,EAAJ,EAAQ;QACNR,YAAY,CAACQ,EAAD,CAAZ;MACD,CAFD,MAEOR,YAAY,CAACI,YAAD,CAAZ;IACR,CAND;EAOD,CARQ,EAQN,EARM,CAAT;EAUAZ,SAAS,CAAC,YAAM;IACd,OAAOmB,OAAO,CAACC,GAAR,CAAYT,MAAZ,CAAP;;IAEA,IAAIA,MAAM,KAAKC,YAAf,EAA6B;MAC3BV,YAAY,CAACmB,OAAb,CAAqB,QAArB,EAA+BJ,IAAI,CAACK,SAAL,CAAeX,MAAf,CAA/B;IACD;;IAEDJ,QAAQ,CAACD,KAAK,GAAG,CAAT,CAAR;EACD,CARQ,EAQN,CAACK,MAAD,CARM,CAAT;EAUA,IAAIL,KAAK,KAAK,CAAd,EAAiB;EAEjB,OAAO,KAAC,aAAD,CAAe,QAAf;IAAwB,KAAK,EAAEK,MAA/B;IAAA,UAAwCN;EAAxC,EAAP;AACD,CAxCM"},"metadata":{},"sourceType":"module"}