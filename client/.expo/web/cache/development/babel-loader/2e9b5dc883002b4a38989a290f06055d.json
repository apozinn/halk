{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useEffect, useState } from 'react';\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n;\nexport var UserContext = createContext({});\nexport var UserProvider = function UserProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      loads = _useState2[0],\n      setLoads = _useState2[1];\n\n  var updateUser = function updateUser(newUser) {\n    setUser({\n      logged: newUser.logged,\n      user: newUser.user,\n      updateUser: updateUser\n    });\n  };\n\n  var initialValue = {\n    logged: false,\n    user: {\n      id: '',\n      phone: '',\n      profile: {\n        name: '',\n        username: '',\n        avatar: '',\n        bio: ''\n      }\n    },\n    updateUser: updateUser\n  };\n\n  var _useState3 = useState(initialValue),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  useEffect(function () {\n    AsyncStorage.getItem('user').then(function (data) {\n      var dt = JSON.parse(data);\n\n      if (dt) {\n        updateUser(dt);\n      } else updateUser(initialValue);\n    });\n  }, []);\n  useEffect(function () {\n    if (user !== initialValue) {\n      AsyncStorage.setItem('user', JSON.stringify(user));\n    }\n\n    setLoads(loads + 1);\n  }, [user]);\n  console.log(loads);\n  if (loads === 0) return;\n  return _jsx(UserContext.Provider, {\n    value: user,\n    children: children\n  });\n};","map":{"version":3,"names":["createContext","useEffect","useState","AsyncStorage","UserContext","UserProvider","children","loads","setLoads","updateUser","newUser","setUser","logged","user","initialValue","id","phone","profile","name","username","avatar","bio","getItem","then","data","dt","JSON","parse","setItem","stringify","console","log"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/src/contexts/user.tsx"],"sourcesContent":["import { createContext, useEffect, useState } from 'react';\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\ninterface UserInterface {\n    logged: boolean;\n    user: {\n        id: string;\n        phone: string;\n        profile: {\n            name: string;\n            username: string;\n            avatar: string;\n            bio: string;\n        };\n    };\n    updateUser: Function;\n};\n\nexport const UserContext = createContext<UserInterface>({} as UserInterface);\n\nexport const UserProvider = ({children}:any) => {\n  const [loads, setLoads] = useState(0);\n\n    const updateUser = (newUser:any) => {\n        setUser({\n            logged: newUser.logged,\n            user: newUser.user,\n            updateUser: updateUser,\n        });\n    }\n\n    const initialValue: UserInterface = {\n        logged: false,\n        user: {\n            id: '',\n            phone: '',\n            profile: {\n                name: '',\n                username: '',\n                avatar: '',\n                bio: '',\n            },\n        },\n        updateUser: updateUser,\n    };\n\n    const [user, setUser] = useState<UserInterface>(initialValue);\n\n    useEffect(() => {\n        AsyncStorage.getItem('user').then((data:any) => {\n            const dt = JSON.parse(data);\n\n            if(dt) {\n                updateUser(dt);\n            } else updateUser(initialValue);\n        });\n    }, []);\n\n    useEffect(() => {\n        if(user !== initialValue) {\n            AsyncStorage.setItem('user', JSON.stringify(user));\n        }\n\n        setLoads(loads+1);\n    }, [user]);\n\n    console.log(loads);\n\n    if(loads === 0) return;\n\n    return (\n        <UserContext.Provider value={user}>\n            {children}\n        </UserContext.Provider>\n    )\n}\n"],"mappings":";AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;AAeC;AAED,OAAO,IAAMC,WAAW,GAAGJ,aAAa,CAAgB,EAAhB,CAAjC;AAEP,OAAO,IAAMK,YAAY,GAAG,SAAfA,YAAe,OAAoB;EAAA,IAAlBC,QAAkB,QAAlBA,QAAkB;;EAC9C,gBAA0BJ,QAAQ,CAAC,CAAD,CAAlC;EAAA;EAAA,IAAOK,KAAP;EAAA,IAAcC,QAAd;;EAEE,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,OAAD,EAAiB;IAChCC,OAAO,CAAC;MACJC,MAAM,EAAEF,OAAO,CAACE,MADZ;MAEJC,IAAI,EAAEH,OAAO,CAACG,IAFV;MAGJJ,UAAU,EAAEA;IAHR,CAAD,CAAP;EAKH,CAND;;EAQA,IAAMK,YAA2B,GAAG;IAChCF,MAAM,EAAE,KADwB;IAEhCC,IAAI,EAAE;MACFE,EAAE,EAAE,EADF;MAEFC,KAAK,EAAE,EAFL;MAGFC,OAAO,EAAE;QACLC,IAAI,EAAE,EADD;QAELC,QAAQ,EAAE,EAFL;QAGLC,MAAM,EAAE,EAHH;QAILC,GAAG,EAAE;MAJA;IAHP,CAF0B;IAYhCZ,UAAU,EAAEA;EAZoB,CAApC;;EAeA,iBAAwBP,QAAQ,CAAgBY,YAAhB,CAAhC;EAAA;EAAA,IAAOD,IAAP;EAAA,IAAaF,OAAb;;EAEAV,SAAS,CAAC,YAAM;IACZE,YAAY,CAACmB,OAAb,CAAqB,MAArB,EAA6BC,IAA7B,CAAkC,UAACC,IAAD,EAAc;MAC5C,IAAMC,EAAE,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAX;;MAEA,IAAGC,EAAH,EAAO;QACHhB,UAAU,CAACgB,EAAD,CAAV;MACH,CAFD,MAEOhB,UAAU,CAACK,YAAD,CAAV;IACV,CAND;EAOH,CARQ,EAQN,EARM,CAAT;EAUAb,SAAS,CAAC,YAAM;IACZ,IAAGY,IAAI,KAAKC,YAAZ,EAA0B;MACtBX,YAAY,CAACyB,OAAb,CAAqB,MAArB,EAA6BF,IAAI,CAACG,SAAL,CAAehB,IAAf,CAA7B;IACH;;IAEDL,QAAQ,CAACD,KAAK,GAAC,CAAP,CAAR;EACH,CANQ,EAMN,CAACM,IAAD,CANM,CAAT;EAQAiB,OAAO,CAACC,GAAR,CAAYxB,KAAZ;EAEA,IAAGA,KAAK,KAAK,CAAb,EAAgB;EAEhB,OACI,KAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEM,IAA7B;IAAA,UACKP;EADL,EADJ;AAKH,CAvDM"},"metadata":{},"sourceType":"module"}