{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var UserContext = createContext({});\nexport var UserProvider = function UserProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    loads = _useState2[0],\n    setLoads = _useState2[1];\n  var updateUser = function updateUser(newUser) {\n    setUser({\n      logged: newUser.logged,\n      user: newUser.user,\n      updateUser: updateUser\n    });\n  };\n  var initialValue = {\n    logged: false,\n    user: {\n      id: \"\",\n      phone: \"\",\n      profile: {\n        name: \"\",\n        username: \"\",\n        avatar: \"\",\n        bio: \"\"\n      }\n    },\n    updateUser: updateUser\n  };\n  var _useState3 = useState(initialValue),\n    _useState4 = _slicedToArray(_useState3, 2),\n    user = _useState4[0],\n    setUser = _useState4[1];\n  useEffect(function () {\n    AsyncStorage.getItem(\"user\").then(function (data) {\n      var dt = JSON.parse(data);\n      if (dt) {\n        updateUser(dt);\n      } else updateUser(initialValue);\n    });\n  }, []);\n  useEffect(function () {\n    if (user !== initialValue) {\n      AsyncStorage.setItem(\"user\", JSON.stringify(user));\n    }\n    setLoads(loads + 1);\n  }, [user]);\n  if (loads === 0) return;\n  return _jsx(UserContext.Provider, {\n    value: user,\n    children: children\n  });\n};","map":{"version":3,"names":["createContext","useEffect","useState","AsyncStorage","UserContext","UserProvider","children","loads","setLoads","updateUser","newUser","setUser","logged","user","initialValue","id","phone","profile","name","username","avatar","bio","getItem","then","data","dt","JSON","parse","setItem","stringify"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/src/contexts/user.tsx"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\ninterface UserInterface {\n  logged: boolean;\n  user: {\n    id: string;\n    phone: string;\n    profile: {\n      name: string;\n      username: string;\n      avatar: string;\n      bio: string;\n    };\n  };\n  updateUser: Function;\n}\n\nexport const UserContext = createContext<UserInterface>({} as UserInterface);\n\nexport const UserProvider = ({ children }: any) => {\n  const [loads, setLoads] = useState(0);\n\n  const updateUser = (newUser: any) => {\n    setUser({\n      logged: newUser.logged,\n      user: newUser.user,\n      updateUser: updateUser,\n    });\n  };\n\n  const initialValue: UserInterface = {\n    logged: false,\n    user: {\n      id: \"\",\n      phone: \"\",\n      profile: {\n        name: \"\",\n        username: \"\",\n        avatar: \"\",\n        bio: \"\",\n      },\n    },\n    updateUser: updateUser,\n  };\n\n  const [user, setUser] = useState<UserInterface>(initialValue);\n\n  useEffect(() => {\n    AsyncStorage.getItem(\"user\").then((data: any) => {\n      const dt = JSON.parse(data);\n\n      if (dt) {\n        updateUser(dt);\n      } else updateUser(initialValue);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (user !== initialValue) {\n      AsyncStorage.setItem(\"user\", JSON.stringify(user));\n    }\n\n    setLoads(loads + 1);\n  }, [user]);\n\n  if (loads === 0) return;\n\n  return <UserContext.Provider value={user}>{children}</UserContext.Provider>;\n};\n"],"mappings":";AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,YAAY,MAAM,2CAA2C;AAAC;AAiBrE,OAAO,IAAMC,WAAW,GAAGJ,aAAa,CAAgB,CAAC,CAAC,CAAkB;AAE5E,OAAO,IAAMK,YAAY,GAAG,SAAfA,YAAY,OAA0B;EAAA,IAApBC,QAAQ,QAARA,QAAQ;EACrC,gBAA0BJ,QAAQ,CAAC,CAAC,CAAC;IAAA;IAA9BK,KAAK;IAAEC,QAAQ;EAEtB,IAAMC,UAAU,GAAG,SAAbA,UAAU,CAAIC,OAAY,EAAK;IACnCC,OAAO,CAAC;MACNC,MAAM,EAAEF,OAAO,CAACE,MAAM;MACtBC,IAAI,EAAEH,OAAO,CAACG,IAAI;MAClBJ,UAAU,EAAEA;IACd,CAAC,CAAC;EACJ,CAAC;EAED,IAAMK,YAA2B,GAAG;IAClCF,MAAM,EAAE,KAAK;IACbC,IAAI,EAAE;MACJE,EAAE,EAAE,EAAE;MACNC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE;QACPC,IAAI,EAAE,EAAE;QACRC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,EAAE;QACVC,GAAG,EAAE;MACP;IACF,CAAC;IACDZ,UAAU,EAAEA;EACd,CAAC;EAED,iBAAwBP,QAAQ,CAAgBY,YAAY,CAAC;IAAA;IAAtDD,IAAI;IAAEF,OAAO;EAEpBV,SAAS,CAAC,YAAM;IACdE,YAAY,CAACmB,OAAO,CAAC,MAAM,CAAC,CAACC,IAAI,CAAC,UAACC,IAAS,EAAK;MAC/C,IAAMC,EAAE,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;MAE3B,IAAIC,EAAE,EAAE;QACNhB,UAAU,CAACgB,EAAE,CAAC;MAChB,CAAC,MAAMhB,UAAU,CAACK,YAAY,CAAC;IACjC,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAENb,SAAS,CAAC,YAAM;IACd,IAAIY,IAAI,KAAKC,YAAY,EAAE;MACzBX,YAAY,CAACyB,OAAO,CAAC,MAAM,EAAEF,IAAI,CAACG,SAAS,CAAChB,IAAI,CAAC,CAAC;IACpD;IAEAL,QAAQ,CAACD,KAAK,GAAG,CAAC,CAAC;EACrB,CAAC,EAAE,CAACM,IAAI,CAAC,CAAC;EAEV,IAAIN,KAAK,KAAK,CAAC,EAAE;EAEjB,OAAO,KAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAEM,IAAK;IAAA,UAAEP;EAAQ,EAAwB;AAC7E,CAAC"},"metadata":{},"sourceType":"module"}