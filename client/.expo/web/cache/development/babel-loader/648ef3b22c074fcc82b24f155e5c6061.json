{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var ChatsContext = createContext({});\nexport var ChatsProvider = function ChatsProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    loads = _useState2[0],\n    setLoads = _useState2[1];\n  var updateChats = function updateChats(newChats) {\n    setChats({\n      chats: newChats.chats,\n      updateChats: updateChats\n    });\n  };\n  var initialValue = {\n    chats: [],\n    updateChats: updateChats\n  };\n  var _useState3 = useState(initialValue),\n    _useState4 = _slicedToArray(_useState3, 2),\n    chats = _useState4[0],\n    setChats = _useState4[1];\n  useEffect(function () {\n    AsyncStorage.getItem(\"chats\").then(function (data) {\n      var dt = JSON.parse(data);\n      if (dt) {\n        updateChats(dt);\n      } else updateChats(initialValue);\n    });\n  }, []);\n  useEffect(function () {\n    if (chats !== initialValue) {\n      AsyncStorage.setItem(\"chats\", JSON.stringify(chats));\n    }\n    setLoads(loads + 1);\n  }, [chats]);\n  if (loads === 0) return;\n  return _jsx(ChatsContext.Provider, {\n    value: chats,\n    children: children\n  });\n};","map":{"version":3,"names":["createContext","useEffect","useState","AsyncStorage","ChatsContext","ChatsProvider","children","loads","setLoads","updateChats","newChats","setChats","chats","initialValue","getItem","then","data","dt","JSON","parse","setItem","stringify"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/src/contexts/chats.tsx"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\ninterface ChatsInterface {\n  chats: Array;\n  updateUser: Function;\n}\n\nexport const ChatsContext = createContext<ChatsInterface>({} as ChatsInterface);\n\nexport const ChatsProvider = ({ children }: any) => {\n  const [loads, setLoads] = useState(0);\n\n  const updateChats = (newChats: any) => {\n    setChats({\n      chats: newChats.chats,\n      updateChats: updateChats,\n    });\n  };\n\n  const initialValue: ChatsInterface = {\n    chats: [],\n    updateChats: updateChats,\n  };\n\n  const [chats, setChats] = useState<ChatsInterface>(initialValue);\n\n  useEffect(() => {\n    AsyncStorage.getItem(\"chats\").then((data: any) => {\n      const dt = JSON.parse(data);\n\n      if (dt) {\n        updateChats(dt);\n      } else updateChats(initialValue);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (chats !== initialValue) {\n      AsyncStorage.setItem(\"chats\", JSON.stringify(chats));\n    }\n    setLoads(loads + 1);\n  }, [chats]);\n\n  if (loads === 0) return;\n\n  return (\n    <ChatsContext.Provider value={chats}>\n      {children}\n    </ChatsContext.Provider>\n  );\n};\n"],"mappings":";AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,YAAY,MAAM,2CAA2C;AAAC;AAOrE,OAAO,IAAMC,YAAY,GAAGJ,aAAa,CAAiB,CAAC,CAAC,CAAmB;AAE/E,OAAO,IAAMK,aAAa,GAAG,SAAhBA,aAAa,OAA0B;EAAA,IAApBC,QAAQ,QAARA,QAAQ;EACtC,gBAA0BJ,QAAQ,CAAC,CAAC,CAAC;IAAA;IAA9BK,KAAK;IAAEC,QAAQ;EAEtB,IAAMC,WAAW,GAAG,SAAdA,WAAW,CAAIC,QAAa,EAAK;IACrCC,QAAQ,CAAC;MACPC,KAAK,EAAEF,QAAQ,CAACE,KAAK;MACrBH,WAAW,EAAEA;IACf,CAAC,CAAC;EACJ,CAAC;EAED,IAAMI,YAA4B,GAAG;IACnCD,KAAK,EAAE,EAAE;IACTH,WAAW,EAAEA;EACf,CAAC;EAED,iBAA0BP,QAAQ,CAAiBW,YAAY,CAAC;IAAA;IAAzDD,KAAK;IAAED,QAAQ;EAEtBV,SAAS,CAAC,YAAM;IACdE,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC,CAACC,IAAI,CAAC,UAACC,IAAS,EAAK;MAChD,IAAMC,EAAE,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;MAE3B,IAAIC,EAAE,EAAE;QACNR,WAAW,CAACQ,EAAE,CAAC;MACjB,CAAC,MAAMR,WAAW,CAACI,YAAY,CAAC;IAClC,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAENZ,SAAS,CAAC,YAAM;IACd,IAAIW,KAAK,KAAKC,YAAY,EAAE;MAC1BV,YAAY,CAACiB,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACG,SAAS,CAACT,KAAK,CAAC,CAAC;IACtD;IACAJ,QAAQ,CAACD,KAAK,GAAG,CAAC,CAAC;EACrB,CAAC,EAAE,CAACK,KAAK,CAAC,CAAC;EAEX,IAAIL,KAAK,KAAK,CAAC,EAAE;EAEjB,OACE,KAAC,YAAY,CAAC,QAAQ;IAAC,KAAK,EAAEK,KAAM;IAAA,UACjCN;EAAQ,EACa;AAE5B,CAAC"},"metadata":{},"sourceType":"module"}