{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { AntDesign, Ionicons, Feather, FontAwesome } from \"@expo/vector-icons\";\nimport { Text } from \"../../src/components/Themed\";\nimport { UserContext } from \"../../src/contexts/user\";\nimport { ChatsContext } from \"../../src/contexts/chats\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Chat(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      chat = _useState2[0],\n      setChat = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      socket = _useState4[0],\n      setSocket = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      messages = _useState6[0],\n      setMessages = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      text = _useState8[0],\n      setText = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      value = _useState10[0],\n      setValue = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      name = _useState12[0],\n      setName = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      ready = _useState14[0],\n      setReady = _useState14[1];\n\n  var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      otherUser = _useState16[0],\n      setOtherUser = _useState16[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useContext2 = useContext(ChatsContext),\n      chats = _useContext2.chats;\n\n  useEffect(function () {\n    var chatId = route.params.id;\n\n    if (chatId) {\n      if (chatId === '0' || !chats.length) {\n        setChat({\n          id: '0',\n          user: {\n            id: '00000000000000000000000',\n            phone: '000000000000000',\n            profile: {\n              name: 'Halk',\n              username: 'halk',\n              avatar: '',\n              bio: ''\n            }\n          },\n          messages: [{\n            content: 'Welcome to halk',\n            author: {\n              id: '00000000000000000000000',\n              phone: '000000000000000',\n              profile: {\n                name: 'Halk',\n                username: 'halk',\n                avatar: '',\n                bio: ''\n              }\n            }\n          }]\n        });\n      } else {\n        var thisChat = chats.filter(function (c) {\n          return c.id === chatId;\n        });\n\n        if (thisChat) {\n          setChat(thisChat);\n        } else navigation.navigate(\"Root\");\n      }\n    } else navigation.navigate(\"Root\");\n  }, [user]);\n  useEffect(function () {\n    return console.log(chat);\n  }, [chat]);\n  return _jsx(View, {\n    style: styles.container,\n    children: !chat ? _jsx(_Fragment, {}) : _jsxs(_Fragment, {\n      children: [_jsxs(View, {\n        style: styles.topContainer,\n        children: [_jsxs(View, {\n          style: styles.topContainerLeft,\n          children: [_jsx(Pressable, {\n            style: function style(_ref2) {\n              var pressed = _ref2.pressed;\n              return [styles.backButton, {\n                backgroundColor: pressed ? \"#333\" : \"transparent\"\n              }];\n            },\n            onPress: function onPress() {\n              return navigation.navigate(\"Root\");\n            },\n            children: _jsx(AntDesign, {\n              name: \"arrowleft\",\n              size: 25,\n              color: \"white\"\n            })\n          }), _jsxs(Pressable, {\n            onPress: function onPress() {},\n            style: styles.userProfile,\n            children: [_jsx(Image, {\n              source: chat.user.profile.avatar ? {\n                uri: chat.user.profile.avatar\n              } : require(\"../../assets/images/userIcon.png\"),\n              style: styles.userIcon\n            }), _jsx(Text, {\n              children: chat.user.profile.name\n            })]\n          })]\n        }), _jsxs(View, {\n          style: styles.topContainerRight,\n          children: [_jsx(Pressable, {\n            style: function style(_ref3) {\n              var pressed = _ref3.pressed;\n              return [styles.backButton, {\n                backgroundColor: pressed ? \"#333\" : \"transparent\"\n              }];\n            },\n            onPress: function onPress() {}\n          }), _jsx(Ionicons, {\n            name: \"call\",\n            size: 24,\n            color: \"white\"\n          }), _jsx(FontAwesome, {\n            name: \"video-camera\",\n            size: 24,\n            color: \"white\",\n            style: {\n              marginHorizontal: 5\n            }\n          }), _jsx(Feather, {\n            name: \"more-vertical\",\n            size: 24,\n            color: \"white\"\n          })]\n        })]\n      }), _jsx(View, {\n        style: styles.messageContainer\n      }), _jsx(View, {\n        style: styles.bottomBar\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight\n  },\n  topContainer: {\n    backgroundColor: '#222',\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 5,\n    justifyContent: 'space-between'\n  },\n  topContainerLeft: {\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  topContainerRight: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between'\n  },\n  otherUserInfo: {},\n  otherUserName: {},\n  messageContainer: {},\n  bottomBar: {},\n  messageCard: {\n    borderWidth: 1,\n    borderColor: \"#222\"\n  },\n  myMessage: {\n    backgroundColor: \"blue\"\n  },\n  otherMessage: {\n    backgroundColor: \"gray\"\n  },\n  userIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 100,\n    marginHorizontal: 5\n  },\n  userProfile: {\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  backButton: {\n    padding: 5,\n    borderRadius: 100\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","useContext","AntDesign","Ionicons","Feather","FontAwesome","Text","UserContext","ChatsContext","Chat","navigation","route","chat","setChat","socket","setSocket","messages","setMessages","text","setText","value","setValue","name","setName","ready","setReady","otherUser","setOtherUser","user","chats","chatId","params","id","length","phone","profile","username","avatar","bio","content","author","thisChat","filter","c","navigate","console","log","styles","container","topContainer","topContainerLeft","pressed","backButton","backgroundColor","userProfile","uri","require","userIcon","topContainerRight","marginHorizontal","messageContainer","bottomBar","StyleSheet","create","flex","marginTop","StatusBar","currentHeight","flexDirection","alignItems","padding","justifyContent","otherUserInfo","otherUserName","messageCard","borderWidth","borderColor","myMessage","otherMessage","width","height","borderRadius"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/screens/chat/chat.tsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { Button, StatusBar, StyleSheet, View, Image, Pressable } from \"react-native\";\nimport { AntDesign, Ionicons, Feather, FontAwesome } from \"@expo/vector-icons\";\nimport { RootStackScreenProps } from \"../../types\";\nimport { TextInput, Text } from \"../../src/components/Themed\";\nimport Socket from \"../../src/utils/socket\";\nimport { UserContext } from \"../../src/contexts/user\";\nimport { ChatsContext } from \"../../src/contexts/chats\";\n\nexport default function Chat({ navigation, route }: RootStackScreenProps<\"Chat\">) {\n  const [chat, setChat] = useState();\n  const [socket, setSocket] = useState();\n  const [messages, setMessages] = useState([]);\n  const [text, setText] = useState(\"\");\n  const [value, setValue] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [ready, setReady] = useState(false);\n  const [otherUser, setOtherUser] = useState();\n\n  const { user } = useContext(UserContext);\n  const { chats } =  useContext(ChatsContext);\n\n  useEffect(() => {\n    const chatId = route.params.id;\n\n    if(chatId) {\n      if(chatId === '0' || !chats.length) {\n        setChat({\n          id: '0',\n          user: {\n            id: '00000000000000000000000',\n            phone: '000000000000000',\n            profile: {\n              name: 'Halk',\n              username: 'halk',\n              avatar: '',\n              bio: '',\n            }\n          },\n          messages: [\n            {\n              content: 'Welcome to halk',\n              author: {\n                id: '00000000000000000000000',\n                phone: '000000000000000',\n                profile: {\n                  name: 'Halk',\n                  username: 'halk',\n                  avatar: '',\n                  bio: '',\n                }\n              },\n            }\n          ],\n        });\n      } else {\n        const thisChat = chats.filter(c => c.id === chatId);\n        if(thisChat) {\n          setChat(thisChat);\n        } else navigation.navigate(\"Root\");\n      }\n    } else navigation.navigate(\"Root\");\n  }, [user]);\n\n  useEffect(() => console.log(chat), [chat]);\n\n  return (\n    <View style={styles.container}>\n    {!chat ? <></> : (<>\n\n      <View style={styles.topContainer}>\n\n      <View style={styles.topContainerLeft}>\n      <Pressable style={({ pressed }) => [\n        styles.backButton,\n        { backgroundColor: pressed ? \"#333\" : \"transparent\" },\n      ]}\n      onPress={() => navigation.navigate(\"Root\")}\n      >\n      <AntDesign name=\"arrowleft\" size={25} color=\"white\" />\n      </Pressable>\n\n      <Pressable onPress={() => {}} style={styles.userProfile}>\n      <Image source={chat.user.profile.avatar ? {uri: chat.user.profile.avatar} : require('../../assets/images/userIcon.png')} style={styles.userIcon}/>\n      <Text>{chat.user.profile.name}</Text>\n      </Pressable>\n      </View>\n\n      <View style={styles.topContainerRight}>\n      <Pressable style={({ pressed }) => [\n        styles.backButton,\n        { backgroundColor: pressed ? \"#333\" : \"transparent\" },\n      ]} onPress={() => {}}></Pressable>\n\n      <Ionicons name=\"call\" size={24} color=\"white\" />\n      <FontAwesome name=\"video-camera\" size={24} color=\"white\" style={{marginHorizontal: 5}} />\n      <Feather name=\"more-vertical\" size={24} color=\"white\" />\n      </View>\n\n      </View>\n\n      <View style={styles.messageContainer}></View>\n\n      <View style={styles.bottomBar}></View>\n\n\n\n\n      </>)}\n\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight,\n  },\n  topContainer: {\n    backgroundColor: '#222',\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 5,\n    justifyContent: 'space-between',\n  },\n  topContainerLeft: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  topContainerRight: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  otherUserInfo: {},\n  otherUserName: {},\n  messageContainer: {},\n  bottomBar: {},\n  messageCard: {\n    borderWidth: 1,\n    borderColor: \"#222\",\n  },\n  myMessage: {\n    backgroundColor: \"blue\",\n  },\n  otherMessage: {\n    backgroundColor: \"gray\",\n  },\n  userIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 100,\n    marginHorizontal: 5,\n  },\n  userProfile: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  backButton: {\n    padding: 5,\n    borderRadius: 100,\n  },\n});\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;;;;;;AAEA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,OAA9B,EAAuCC,WAAvC,QAA0D,oBAA1D;AAEA,SAAoBC,IAApB;AAEA,SAASC,WAAT;AACA,SAASC,YAAT;;;;AAEA,eAAe,SAASC,IAAT,OAAmE;EAAA,IAAnDC,UAAmD,QAAnDA,UAAmD;EAAA,IAAvCC,KAAuC,QAAvCA,KAAuC;;EAChF,gBAAwBX,QAAQ,EAAhC;EAAA;EAAA,IAAOY,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAA4Bb,QAAQ,EAApC;EAAA;EAAA,IAAOc,MAAP;EAAA,IAAeC,SAAf;;EACA,iBAAgCf,QAAQ,CAAC,EAAD,CAAxC;EAAA;EAAA,IAAOgB,QAAP;EAAA,IAAiBC,WAAjB;;EACA,iBAAwBjB,QAAQ,CAAC,EAAD,CAAhC;EAAA;EAAA,IAAOkB,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAA0BnB,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAOoB,KAAP;EAAA,IAAcC,QAAd;;EACA,kBAAwBrB,QAAQ,CAAC,EAAD,CAAhC;EAAA;EAAA,IAAOsB,IAAP;EAAA,IAAaC,OAAb;;EACA,kBAA0BvB,QAAQ,CAAC,KAAD,CAAlC;EAAA;EAAA,IAAOwB,KAAP;EAAA,IAAcC,QAAd;;EACA,kBAAkCzB,QAAQ,EAA1C;EAAA;EAAA,IAAO0B,SAAP;EAAA,IAAkBC,YAAlB;;EAEA,kBAAiB1B,UAAU,CAACM,WAAD,CAA3B;EAAA,IAAQqB,IAAR,eAAQA,IAAR;;EACA,mBAAmB3B,UAAU,CAACO,YAAD,CAA7B;EAAA,IAAQqB,KAAR,gBAAQA,KAAR;;EAEA9B,SAAS,CAAC,YAAM;IACd,IAAM+B,MAAM,GAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA5B;;IAEA,IAAGF,MAAH,EAAW;MACT,IAAGA,MAAM,KAAK,GAAX,IAAkB,CAACD,KAAK,CAACI,MAA5B,EAAoC;QAClCpB,OAAO,CAAC;UACNmB,EAAE,EAAE,GADE;UAENJ,IAAI,EAAE;YACJI,EAAE,EAAE,yBADA;YAEJE,KAAK,EAAE,iBAFH;YAGJC,OAAO,EAAE;cACPb,IAAI,EAAE,MADC;cAEPc,QAAQ,EAAE,MAFH;cAGPC,MAAM,EAAE,EAHD;cAIPC,GAAG,EAAE;YAJE;UAHL,CAFA;UAYNtB,QAAQ,EAAE,CACR;YACEuB,OAAO,EAAE,iBADX;YAEEC,MAAM,EAAE;cACNR,EAAE,EAAE,yBADE;cAENE,KAAK,EAAE,iBAFD;cAGNC,OAAO,EAAE;gBACPb,IAAI,EAAE,MADC;gBAEPc,QAAQ,EAAE,MAFH;gBAGPC,MAAM,EAAE,EAHD;gBAIPC,GAAG,EAAE;cAJE;YAHH;UAFV,CADQ;QAZJ,CAAD,CAAP;MA4BD,CA7BD,MA6BO;QACL,IAAMG,QAAQ,GAAGZ,KAAK,CAACa,MAAN,CAAa,UAAAC,CAAC;UAAA,OAAIA,CAAC,CAACX,EAAF,KAASF,MAAb;QAAA,CAAd,CAAjB;;QACA,IAAGW,QAAH,EAAa;UACX5B,OAAO,CAAC4B,QAAD,CAAP;QACD,CAFD,MAEO/B,UAAU,CAACkC,QAAX,CAAoB,MAApB;MACR;IACF,CApCD,MAoCOlC,UAAU,CAACkC,QAAX,CAAoB,MAApB;EACR,CAxCQ,EAwCN,CAAChB,IAAD,CAxCM,CAAT;EA0CA7B,SAAS,CAAC;IAAA,OAAM8C,OAAO,CAACC,GAAR,CAAYlC,IAAZ,CAAN;EAAA,CAAD,EAA0B,CAACA,IAAD,CAA1B,CAAT;EAEA,OACE,KAAC,IAAD;IAAM,KAAK,EAAEmC,MAAM,CAACC,SAApB;IAAA,UACC,CAACpC,IAAD,GAAQ,mBAAR,GAAiB;MAAA,WAEhB,MAAC,IAAD;QAAM,KAAK,EAAEmC,MAAM,CAACE,YAApB;QAAA,WAEA,MAAC,IAAD;UAAM,KAAK,EAAEF,MAAM,CAACG,gBAApB;UAAA,WACA,KAAC,SAAD;YAAW,KAAK,EAAE;cAAA,IAAGC,OAAH,SAAGA,OAAH;cAAA,OAAiB,CACjCJ,MAAM,CAACK,UAD0B,EAEjC;gBAAEC,eAAe,EAAEF,OAAO,GAAG,MAAH,GAAY;cAAtC,CAFiC,CAAjB;YAAA,CAAlB;YAIA,OAAO,EAAE;cAAA,OAAMzC,UAAU,CAACkC,QAAX,CAAoB,MAApB,CAAN;YAAA,CAJT;YAAA,UAMA,KAAC,SAAD;cAAW,IAAI,EAAC,WAAhB;cAA4B,IAAI,EAAE,EAAlC;cAAsC,KAAK,EAAC;YAA5C;UANA,EADA,EAUA,MAAC,SAAD;YAAW,OAAO,EAAE,mBAAM,CAAE,CAA5B;YAA8B,KAAK,EAAEG,MAAM,CAACO,WAA5C;YAAA,WACA,KAAC,KAAD;cAAO,MAAM,EAAE1C,IAAI,CAACgB,IAAL,CAAUO,OAAV,CAAkBE,MAAlB,GAA2B;gBAACkB,GAAG,EAAE3C,IAAI,CAACgB,IAAL,CAAUO,OAAV,CAAkBE;cAAxB,CAA3B,GAA6DmB,OAAO,oCAAnF;cAAyH,KAAK,EAAET,MAAM,CAACU;YAAvI,EADA,EAEA,KAAC,IAAD;cAAA,UAAO7C,IAAI,CAACgB,IAAL,CAAUO,OAAV,CAAkBb;YAAzB,EAFA;UAAA,EAVA;QAAA,EAFA,EAkBA,MAAC,IAAD;UAAM,KAAK,EAAEyB,MAAM,CAACW,iBAApB;UAAA,WACA,KAAC,SAAD;YAAW,KAAK,EAAE;cAAA,IAAGP,OAAH,SAAGA,OAAH;cAAA,OAAiB,CACjCJ,MAAM,CAACK,UAD0B,EAEjC;gBAAEC,eAAe,EAAEF,OAAO,GAAG,MAAH,GAAY;cAAtC,CAFiC,CAAjB;YAAA,CAAlB;YAGG,OAAO,EAAE,mBAAM,CAAE;UAHpB,EADA,EAMA,KAAC,QAAD;YAAU,IAAI,EAAC,MAAf;YAAsB,IAAI,EAAE,EAA5B;YAAgC,KAAK,EAAC;UAAtC,EANA,EAOA,KAAC,WAAD;YAAa,IAAI,EAAC,cAAlB;YAAiC,IAAI,EAAE,EAAvC;YAA2C,KAAK,EAAC,OAAjD;YAAyD,KAAK,EAAE;cAACQ,gBAAgB,EAAE;YAAnB;UAAhE,EAPA,EAQA,KAAC,OAAD;YAAS,IAAI,EAAC,eAAd;YAA8B,IAAI,EAAE,EAApC;YAAwC,KAAK,EAAC;UAA9C,EARA;QAAA,EAlBA;MAAA,EAFgB,EAiChB,KAAC,IAAD;QAAM,KAAK,EAAEZ,MAAM,CAACa;MAApB,EAjCgB,EAmChB,KAAC,IAAD;QAAM,KAAK,EAAEb,MAAM,CAACc;MAApB,EAnCgB;IAAA;EADlB,EADF;AA8CD;AAED,IAAMd,MAAM,GAAGe,UAAU,CAACC,MAAX,CAAkB;EAC/Bf,SAAS,EAAE;IACTgB,IAAI,EAAE,CADG;IAETC,SAAS,EAAEC,SAAS,CAACC;EAFZ,CADoB;EAK/BlB,YAAY,EAAE;IACZI,eAAe,EAAE,MADL;IAEZe,aAAa,EAAE,KAFH;IAGZC,UAAU,EAAE,QAHA;IAIZC,OAAO,EAAE,CAJG;IAKZC,cAAc,EAAE;EALJ,CALiB;EAY/BrB,gBAAgB,EAAE;IAChBkB,aAAa,EAAE,KADC;IAEhBC,UAAU,EAAE;EAFI,CAZa;EAgB/BX,iBAAiB,EAAE;IACjBU,aAAa,EAAE,KADE;IAEjBC,UAAU,EAAE,QAFK;IAGjBE,cAAc,EAAE;EAHC,CAhBY;EAqB/BC,aAAa,EAAE,EArBgB;EAsB/BC,aAAa,EAAE,EAtBgB;EAuB/Bb,gBAAgB,EAAE,EAvBa;EAwB/BC,SAAS,EAAE,EAxBoB;EAyB/Ba,WAAW,EAAE;IACXC,WAAW,EAAE,CADF;IAEXC,WAAW,EAAE;EAFF,CAzBkB;EA6B/BC,SAAS,EAAE;IACTxB,eAAe,EAAE;EADR,CA7BoB;EAgC/ByB,YAAY,EAAE;IACZzB,eAAe,EAAE;EADL,CAhCiB;EAmC/BI,QAAQ,EAAE;IACRsB,KAAK,EAAE,EADC;IAERC,MAAM,EAAE,EAFA;IAGRC,YAAY,EAAE,GAHN;IAIRtB,gBAAgB,EAAE;EAJV,CAnCqB;EAyC/BL,WAAW,EAAE;IACXc,aAAa,EAAE,KADJ;IAEXC,UAAU,EAAE;EAFD,CAzCkB;EA6C/BjB,UAAU,EAAE;IACVkB,OAAO,EAAE,CADC;IAEVW,YAAY,EAAE;EAFJ;AA7CmB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}