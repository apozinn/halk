{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useContext, useEffect } from \"react\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Text, TextInput } from \"../../src/components/Themed\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { createProfile, verifyUsername } from \"../../middleware/api\";\nimport { UserContext } from \"../../src/contexts/user\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function CreateProfile(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    name = _useState2[0],\n    setName = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    username = _useState4[0],\n    setUsername = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    avatar = _useState6[0],\n    setAvatar = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    bio = _useState8[0],\n    setBio = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    existsUsername = _useState10[0],\n    setExistsUsername = _useState10[1];\n  var _useContext = useContext(UserContext),\n    user = _useContext.user,\n    logged = _useContext.logged,\n    updateUser = _useContext.updateUser;\n  function Create() {\n    var newUser = {\n      id: user.id,\n      phone: user.phone,\n      profile: {\n        name: name,\n        username: username,\n        avatar: avatar,\n        bio: bio\n      }\n    };\n    createProfile(newUser).then(function (data) {\n      if (data.err) return alert(\"houve um erro ao criar o seu perfil, tente novamente\");\n      if (data.created) {\n        updateUser({\n          logged: true,\n          user: newUser\n        });\n        navigation.navigate(\"Root\");\n      }\n    });\n  }\n  useEffect(function () {\n    if (username) verifyUsername(username).then(function (data) {\n      return setExistsUsername(data.exists);\n    });\n  }, [username]);\n  function SelectIcon() {\n    return _SelectIcon.apply(this, arguments);\n  }\n  function _SelectIcon() {\n    _SelectIcon = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1\n      });\n      if (!result.cancelled) {\n        setAvatar(result.uri);\n      }\n    });\n    return _SelectIcon.apply(this, arguments);\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Create your profile\"\n    }), _jsxs(View, {\n      style: styles.primaryDiv,\n      children: [_jsxs(Pressable, {\n        style: styles.iconContainer,\n        onPress: function onPress() {\n          return SelectIcon();\n        },\n        children: [_jsx(Image, {\n          source: avatar ? avatar : {\n            uri: \"https://imgur.com/4yEDQPW.png\"\n          },\n          style: styles.userIcon\n        }), _jsx(Text, {\n          style: {\n            fontSize: 10\n          },\n          children: \"Choose a icon\"\n        })]\n      }), _jsxs(View, {\n        style: styles.inputsContainer,\n        children: [_jsxs(View, {\n          style: styles.inputContainer,\n          children: [_jsx(Text, {\n            style: styles.inputTitle,\n            children: \"Name\"\n          }), _jsx(TextInput, {\n            style: styles.nameInput,\n            onChangeText: function onChangeText(value) {\n              return setName(value);\n            }\n          })]\n        }), _jsxs(View, {\n          style: styles.inputContainer,\n          children: [_jsx(Text, {\n            style: styles.inputTitle,\n            children: \"Username\"\n          }), _jsx(TextInput, {\n            style: styles.nameInput,\n            onChangeText: function onChangeText(value) {\n              return setUsername(value);\n            }\n          }), existsUsername ? _jsx(Text, {\n            style: styles.existsUsername,\n            children: \"Este username j\\xE1 esta sendo usado\"\n          }) : _jsx(_Fragment, {})]\n        })]\n      })]\n    }), _jsxs(View, {\n      style: styles.secondaryDiv,\n      children: [_jsx(Text, {\n        style: styles.inputTitle,\n        children: \"Bio\"\n      }), _jsx(TextInput, {\n        style: styles.bioInput,\n        onChangeText: function onChangeText(value) {\n          return setBio(value);\n        }\n      })]\n    }), _jsx(Pressable, {\n      style: styles.nextButton,\n      onPress: function onPress() {\n        return Create();\n      },\n      children: _jsx(Text, {\n        style: {\n          color: \"white\"\n        },\n        children: \"Continue\"\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight\n  },\n  title: {\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 10\n  },\n  primaryDiv: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  secondaryDiv: {\n    margin: 10\n  },\n  userIcon: {\n    width: 100,\n    height: 100,\n    marginBottom: 5,\n    borderRadius: 100\n  },\n  iconContainer: {\n    margin: 10,\n    alignItems: \"center\"\n  },\n  inputsContainer: {},\n  inputContainer: {},\n  inputTitle: {\n    fontSize: 10\n  },\n  nameInput: {\n    borderBottomColor: \"#222\",\n    borderBottomWidth: 1,\n    paddingVertical: 3,\n    marginBottom: 10\n  },\n  bioInput: {\n    borderWidth: 1,\n    borderColor: \"#222\",\n    borderRadius: 10,\n    marginTop: 5,\n    height: 70\n  },\n  nextButton: {\n    backgroundColor: \"#2f95dc\",\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 50,\n    position: \"absolute\",\n    bottom: 10,\n    left: \"40%\"\n  },\n  existsUsername: {\n    fontSize: 11,\n    color: \"red\"\n  }\n});","map":{"version":3,"names":["useState","useContext","useEffect","Text","TextInput","ImagePicker","createProfile","verifyUsername","UserContext","CreateProfile","navigation","name","setName","username","setUsername","avatar","setAvatar","bio","setBio","existsUsername","setExistsUsername","user","logged","updateUser","Create","newUser","id","phone","profile","then","data","err","alert","created","navigate","exists","SelectIcon","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","cancelled","uri","styles","container","title","primaryDiv","iconContainer","userIcon","fontSize","inputsContainer","inputContainer","inputTitle","nameInput","value","secondaryDiv","bioInput","nextButton","color","StyleSheet","create","flex","marginTop","StatusBar","currentHeight","fontWeight","textAlign","margin","flexDirection","alignItems","width","height","marginBottom","borderRadius","borderBottomColor","borderBottomWidth","paddingVertical","borderWidth","borderColor","backgroundColor","paddingHorizontal","position","bottom","left"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/screens/register/createProfile.tsx"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport { Image, Pressable, StatusBar, StyleSheet, View } from \"react-native\";\nimport { RootStackScreenProps } from \"../../types\";\nimport { Text, TextInput } from \"../../src/components/Themed\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { createProfile, verifyUsername } from \"../../middleware/api\";\nimport { UserContext } from \"../../src/contexts/user\";\n\nexport default function CreateProfile({\n  navigation,\n}: RootStackScreenProps<\"CreateProfile\">) {\n  const [name, setName] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [avatar, setAvatar] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [existsUsername, setExistsUsername] = useState(false);\n\n  const { user, logged, updateUser } = useContext(UserContext);\n\n  function Create() {\n    const newUser = {\n      id: user.id,\n      phone: user.phone,\n      profile: {\n        name,\n        username,\n        avatar,\n        bio,\n      },\n    };\n\n    createProfile(newUser).then((data) => {\n      if (data.err)\n        return alert(\"houve um erro ao criar o seu perfil, tente novamente\");\n\n      if (data.created) {\n        updateUser({\n          logged: true,\n          user: newUser,\n        });\n        navigation.navigate(\"Root\");\n      }\n    });\n  }\n\n  useEffect(() => {\n    if (username)\n      verifyUsername(username).then((data) => setExistsUsername(data.exists));\n  }, [username]);\n\n  async function SelectIcon() {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n\n    if (!result.cancelled) {\n      setAvatar(result.uri);\n    }\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Create your profile</Text>\n      <View style={styles.primaryDiv}>\n        <Pressable style={styles.iconContainer} onPress={() => SelectIcon()}>\n          <Image\n            source={\n              avatar ? avatar : {uri: \"https://imgur.com/4yEDQPW.png\"}\n            }\n            style={styles.userIcon}\n          />\n          <Text style={{ fontSize: 10 }}>Choose a icon</Text>\n        </Pressable>\n        <View style={styles.inputsContainer}>\n          <View style={styles.inputContainer}>\n            <Text style={styles.inputTitle}>Name</Text>\n            <TextInput\n              style={styles.nameInput}\n              onChangeText={(value) => setName(value)}\n            />\n          </View>\n          <View style={styles.inputContainer}>\n            <Text style={styles.inputTitle}>Username</Text>\n            <TextInput\n              style={styles.nameInput}\n              onChangeText={(value) => setUsername(value)}\n            />\n            {existsUsername ? (\n              <Text style={styles.existsUsername}>\n                Este username j√° esta sendo usado\n              </Text>\n            ) : (\n              <></>\n            )}\n          </View>\n        </View>\n      </View>\n      <View style={styles.secondaryDiv}>\n        <Text style={styles.inputTitle}>Bio</Text>\n        <TextInput\n          style={styles.bioInput}\n          onChangeText={(value) => setBio(value)}\n        />\n      </View>\n      <Pressable style={styles.nextButton} onPress={() => Create()}>\n        <Text style={{ color: \"white\" }}>Continue</Text>\n      </Pressable>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight,\n  },\n  title: {\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 10,\n  },\n  primaryDiv: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  secondaryDiv: {\n    margin: 10,\n  },\n  userIcon: {\n    width: 100,\n    height: 100,\n    marginBottom: 5,\n    borderRadius: 100,\n  },\n  iconContainer: {\n    margin: 10,\n    alignItems: \"center\",\n  },\n  inputsContainer: {},\n  inputContainer: {},\n  inputTitle: {\n    fontSize: 10,\n  },\n  nameInput: {\n    borderBottomColor: \"#222\",\n    borderBottomWidth: 1,\n    paddingVertical: 3,\n    marginBottom: 10,\n  },\n  bioInput: {\n    borderWidth: 1,\n    borderColor: \"#222\",\n    borderRadius: 10,\n    marginTop: 5,\n    height: 70,\n  },\n  nextButton: {\n    backgroundColor: \"#2f95dc\",\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 50,\n    position: \"absolute\",\n    bottom: 10,\n    left: \"40%\",\n  },\n  existsUsername: {\n    fontSize: 11,\n    color: \"red\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}