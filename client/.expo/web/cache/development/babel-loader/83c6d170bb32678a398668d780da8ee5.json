{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useContext, useEffect } from \"react\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Text, TextInput } from \"../../src/components/Themed\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { createProfile, verifyUsername } from \"../../middleware/api\";\nimport { UserContext } from \"../../src/contexts/user\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function CreateProfile(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      username = _useState4[0],\n      setUsername = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      avatar = _useState6[0],\n      setAvatar = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      bio = _useState8[0],\n      setBio = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      existsUsername = _useState10[0],\n      setExistsUsername = _useState10[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user,\n      logged = _useContext.logged,\n      updateUser = _useContext.updateUser;\n\n  function Create() {\n    var newUser = {\n      id: user.id,\n      phone: user.phone,\n      profile: {\n        name: name,\n        username: username,\n        avatar: avatar,\n        bio: bio\n      }\n    };\n    createProfile(newUser).then(function (data) {\n      if (data.err) return alert(\"houve um erro ao criar o seu perfil, tente novamente\");\n\n      if (data.created) {\n        updateUser({\n          logged: true,\n          user: newUser\n        });\n        navigation.navigate(\"Root\");\n      }\n    });\n  }\n\n  useEffect(function () {\n    if (username) verifyUsername(username).then(function (data) {\n      return setExistsUsername(data.exists);\n    });\n  }, [username]);\n\n  function SelectIcon() {\n    return _SelectIcon.apply(this, arguments);\n  }\n\n  function _SelectIcon() {\n    _SelectIcon = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1\n      });\n\n      if (!result.cancelled) {\n        setAvatar(result.uri);\n      }\n    });\n    return _SelectIcon.apply(this, arguments);\n  }\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Create your profile\"\n    }), _jsxs(View, {\n      style: styles.primaryDiv,\n      children: [_jsxs(Pressable, {\n        style: styles.iconContainer,\n        onPress: function onPress() {\n          return SelectIcon();\n        },\n        children: [_jsx(Image, {\n          source: avatar ? avatar : {\n            uri: \"https://imgur.com/4yEDQPW.png\"\n          },\n          style: styles.userIcon\n        }), _jsx(Text, {\n          style: {\n            fontSize: 10\n          },\n          children: \"Choose a icon\"\n        })]\n      }), _jsxs(View, {\n        style: styles.inputsContainer,\n        children: [_jsxs(View, {\n          style: styles.inputContainer,\n          children: [_jsx(Text, {\n            style: styles.inputTitle,\n            children: \"Name\"\n          }), _jsx(TextInput, {\n            style: styles.nameInput,\n            onChangeText: function onChangeText(value) {\n              return setName(value);\n            }\n          })]\n        }), _jsxs(View, {\n          style: styles.inputContainer,\n          children: [_jsx(Text, {\n            style: styles.inputTitle,\n            children: \"Username\"\n          }), _jsx(TextInput, {\n            style: styles.nameInput,\n            onChangeText: function onChangeText(value) {\n              return setUsername(value);\n            }\n          }), existsUsername ? _jsx(Text, {\n            style: styles.existsUsername,\n            children: \"Este username j\\xE1 esta sendo usado\"\n          }) : _jsx(_Fragment, {})]\n        })]\n      })]\n    }), _jsxs(View, {\n      style: styles.secondaryDiv,\n      children: [_jsx(Text, {\n        style: styles.inputTitle,\n        children: \"Bio\"\n      }), _jsx(TextInput, {\n        style: styles.bioInput,\n        onChangeText: function onChangeText(value) {\n          return setBio(value);\n        }\n      })]\n    }), _jsx(Pressable, {\n      style: styles.nextButton,\n      onPress: function onPress() {\n        return Create();\n      },\n      children: _jsx(Text, {\n        style: {\n          color: \"white\"\n        },\n        children: \"Continue\"\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight\n  },\n  title: {\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 10\n  },\n  primaryDiv: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  secondaryDiv: {\n    margin: 10\n  },\n  userIcon: {\n    width: 100,\n    height: 100,\n    marginBottom: 5,\n    borderRadius: 100\n  },\n  iconContainer: {\n    margin: 10,\n    alignItems: \"center\"\n  },\n  inputsContainer: {},\n  inputContainer: {},\n  inputTitle: {\n    fontSize: 10\n  },\n  nameInput: {\n    borderBottomColor: \"#222\",\n    borderBottomWidth: 1,\n    paddingVertical: 3,\n    marginBottom: 10\n  },\n  bioInput: {\n    borderWidth: 1,\n    borderColor: \"#222\",\n    borderRadius: 10,\n    marginTop: 5,\n    height: 70\n  },\n  nextButton: {\n    backgroundColor: \"#2f95dc\",\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 50,\n    position: \"absolute\",\n    bottom: 10,\n    left: \"40%\"\n  },\n  existsUsername: {\n    fontSize: 11,\n    color: \"red\"\n  }\n});","map":{"version":3,"names":["useState","useContext","useEffect","Text","TextInput","ImagePicker","createProfile","verifyUsername","UserContext","CreateProfile","navigation","name","setName","username","setUsername","avatar","setAvatar","bio","setBio","existsUsername","setExistsUsername","user","logged","updateUser","Create","newUser","id","phone","profile","then","data","err","alert","created","navigate","exists","SelectIcon","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","cancelled","uri","styles","container","title","primaryDiv","iconContainer","userIcon","fontSize","inputsContainer","inputContainer","inputTitle","nameInput","value","secondaryDiv","bioInput","nextButton","color","StyleSheet","create","flex","marginTop","StatusBar","currentHeight","fontWeight","textAlign","margin","flexDirection","alignItems","width","height","marginBottom","borderRadius","borderBottomColor","borderBottomWidth","paddingVertical","borderWidth","borderColor","backgroundColor","paddingHorizontal","position","bottom","left"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/screens/register/createProfile.tsx"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport { Image, Pressable, StatusBar, StyleSheet, View } from \"react-native\";\nimport { RootStackScreenProps } from \"../../types\";\nimport { Text, TextInput } from \"../../src/components/Themed\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { createProfile, verifyUsername } from \"../../middleware/api\";\nimport { UserContext } from \"../../src/contexts/user\";\n\nexport default function CreateProfile({\n  navigation,\n}: RootStackScreenProps<\"CreateProfile\">) {\n  const [name, setName] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [avatar, setAvatar] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [existsUsername, setExistsUsername] = useState(false);\n\n  const { user, logged, updateUser } = useContext(UserContext);\n\n  function Create() {\n    const newUser = {\n      id: user.id,\n      phone: user.phone,\n      profile: {\n        name,\n        username,\n        avatar,\n        bio,\n      },\n    };\n\n    createProfile(newUser).then((data) => {\n      if (data.err)\n        return alert(\"houve um erro ao criar o seu perfil, tente novamente\");\n\n      if (data.created) {\n        updateUser({\n          logged: true,\n          user: newUser,\n        });\n        navigation.navigate(\"Root\");\n      }\n    });\n  }\n\n  useEffect(() => {\n    if (username)\n      verifyUsername(username).then((data) => setExistsUsername(data.exists));\n  }, [username]);\n\n  async function SelectIcon() {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n\n    if (!result.cancelled) {\n      setAvatar(result.uri);\n    }\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Create your profile</Text>\n      <View style={styles.primaryDiv}>\n        <Pressable style={styles.iconContainer} onPress={() => SelectIcon()}>\n          <Image\n            source={\n              avatar ? avatar : {uri: \"https://imgur.com/4yEDQPW.png\"}\n            }\n            style={styles.userIcon}\n          />\n          <Text style={{ fontSize: 10 }}>Choose a icon</Text>\n        </Pressable>\n        <View style={styles.inputsContainer}>\n          <View style={styles.inputContainer}>\n            <Text style={styles.inputTitle}>Name</Text>\n            <TextInput\n              style={styles.nameInput}\n              onChangeText={(value) => setName(value)}\n            />\n          </View>\n          <View style={styles.inputContainer}>\n            <Text style={styles.inputTitle}>Username</Text>\n            <TextInput\n              style={styles.nameInput}\n              onChangeText={(value) => setUsername(value)}\n            />\n            {existsUsername ? (\n              <Text style={styles.existsUsername}>\n                Este username j√° esta sendo usado\n              </Text>\n            ) : (\n              <></>\n            )}\n          </View>\n        </View>\n      </View>\n      <View style={styles.secondaryDiv}>\n        <Text style={styles.inputTitle}>Bio</Text>\n        <TextInput\n          style={styles.bioInput}\n          onChangeText={(value) => setBio(value)}\n        />\n      </View>\n      <Pressable style={styles.nextButton} onPress={() => Create()}>\n        <Text style={{ color: \"white\" }}>Continue</Text>\n      </Pressable>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight,\n  },\n  title: {\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 10,\n  },\n  primaryDiv: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  secondaryDiv: {\n    margin: 10,\n  },\n  userIcon: {\n    width: 100,\n    height: 100,\n    marginBottom: 5,\n    borderRadius: 100,\n  },\n  iconContainer: {\n    margin: 10,\n    alignItems: \"center\",\n  },\n  inputsContainer: {},\n  inputContainer: {},\n  inputTitle: {\n    fontSize: 10,\n  },\n  nameInput: {\n    borderBottomColor: \"#222\",\n    borderBottomWidth: 1,\n    paddingVertical: 3,\n    marginBottom: 10,\n  },\n  bioInput: {\n    borderWidth: 1,\n    borderColor: \"#222\",\n    borderRadius: 10,\n    marginTop: 5,\n    height: 70,\n  },\n  nextButton: {\n    backgroundColor: \"#2f95dc\",\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 50,\n    position: \"absolute\",\n    bottom: 10,\n    left: \"40%\",\n  },\n  existsUsername: {\n    fontSize: 11,\n    color: \"red\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}