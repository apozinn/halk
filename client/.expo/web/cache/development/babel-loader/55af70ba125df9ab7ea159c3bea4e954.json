{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Ionicons, FontAwesome, MaterialIcons, Fontisto } from \"@expo/vector-icons\";\nimport { TextInput } from \"./Themed\";\nimport { getColors } from \"../../constants/Colors\";\nimport { UserContext } from \"../contexts/user\";\nimport { ChatsContext } from \"../contexts/chats\";\nimport { SocketContext } from \"../contexts/socket\";\nimport { SocketController } from \"../utils/socket\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function BottomContent(_ref) {\n  var chat = _ref.chat;\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useContext2 = useContext(ChatsContext),\n      chats = _useContext2.chats,\n      updateChats = _useContext2.updateChats;\n\n  var socket = useContext(SocketContext);\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userTyping = _useState4[0],\n      setUserTyping = _useState4[1];\n\n  var colors = getColors();\n  useEffect(function () {\n    if (!socket || !chat) return;\n\n    if (text.length === 0) {\n      socket.emit(\"userTyping\", {\n        room: chat.id,\n        typing: false,\n        userId: user.id\n      });\n    } else {\n      socket.emit(\"userTyping\", {\n        room: chat.id,\n        typing: true,\n        userId: user.id\n      });\n    }\n\n    socket.on(\"userTyping\", function (t) {\n      if (t.userId === user.id) return;\n      setUserTyping(t.typing);\n    });\n  }, [text]);\n\n  function sendMessage() {\n    if (!text) return;\n    new SocketController.sendMessage({\n      user: user,\n      chats: chats,\n      updateChats: updateChats,\n      chat: chat,\n      socket: socket,\n      text: text\n    });\n    setText(\"\");\n  }\n\n  return _jsxs(View, {\n    style: [styles.bottomContainer, {\n      backgroundColor: colors.defaultColors.card\n    }],\n    children: [_jsxs(View, {\n      style: styles.buttonContentLeft,\n      children: [_jsx(TouchableOpacity, {\n        style: styles.blueButton,\n        onPress: function onPress() {},\n        children: _jsx(Fontisto, {\n          name: \"camera\",\n          size: 20,\n          color: \"white\"\n        })\n      }), _jsx(TextInput, {\n        style: styles.inputMessage,\n        placeholder: \"Mensagem...\",\n        value: text,\n        onChangeText: function onChangeText(value) {\n          return setText(value);\n        },\n        onSubmitEditing: function onSubmitEditing() {\n          return sendMessage();\n        },\n        maxLength: 4100,\n        autoFocus: true\n      })]\n    }), text ? _jsx(TouchableOpacity, {\n      style: styles.blueButton,\n      onPress: function onPress() {\n        return sendMessage();\n      },\n      children: _jsx(FontAwesome, {\n        name: \"send\",\n        size: 24,\n        color: \"white\"\n      })\n    }) : _jsxs(View, {\n      style: styles.othersMedias,\n      children: [_jsx(TouchableOpacity, {\n        onPress: function onPress() {},\n        children: _jsx(Ionicons, {\n          name: \"ios-add-circle-outline\",\n          size: 26,\n          color: colors.tint\n        })\n      }), _jsx(TouchableOpacity, {\n        style: {\n          marginLeft: 8\n        },\n        onPress: function onPress() {},\n        children: _jsx(MaterialIcons, {\n          name: \"keyboard-voice\",\n          size: 26,\n          color: colors.tint\n        })\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  bottomContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    position: \"absolute\",\n    backgroundColor: \"rgb(18, 18, 18)\",\n    justifyContent: \"space-between\",\n    borderRadius: 50,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    padding: 5,\n    margin: 5\n  },\n  button: {\n    padding: 5\n  },\n  buttonContentLeft: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    width: \"80%\"\n  },\n  blueButton: {\n    backgroundColor: \"#2f95dc\",\n    padding: 8,\n    borderRadius: 100\n  },\n  othersMedias: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  inputMessage: {\n    paddingVertical: 8,\n    width: \"100%\",\n    marginLeft: 10\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","useContext","Ionicons","FontAwesome","MaterialIcons","Fontisto","TextInput","getColors","UserContext","ChatsContext","SocketContext","SocketController","BottomContent","chat","user","chats","updateChats","socket","text","setText","userTyping","setUserTyping","colors","length","emit","room","id","typing","userId","on","t","sendMessage","styles","bottomContainer","backgroundColor","defaultColors","card","buttonContentLeft","blueButton","inputMessage","value","othersMedias","tint","marginLeft","StyleSheet","create","flexDirection","alignItems","position","justifyContent","borderRadius","bottom","left","right","padding","margin","button","width","paddingVertical"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/src/components/bottomContent.tsx"],"sourcesContent":["import React, { useEffect, useState, useContext, useRef } from \"react\";\nimport { Button, StyleSheet, View, TouchableOpacity } from \"react-native\";\nimport {\n\tAntDesign,\n\tIonicons,\n\tFeather,\n\tFontAwesome,\n\tMaterialIcons,\n\tFontisto,\n} from \"@expo/vector-icons\";\nimport { TextInput, Text } from \"./Themed\";\nimport { getColors } from \"../../constants/Colors\";\nimport { UserContext } from \"../contexts/user\";\nimport { ChatsContext } from \"../contexts/chats\";\nimport { SocketContext } from \"../contexts/socket\";\nimport { SocketController } from \"../utils/socket\";\n\nexport default function BottomContent({ chat }) {\n\tconst { user } = useContext(UserContext);\n\tconst { chats, updateChats } = useContext(ChatsContext);\n\tconst socket = useContext(SocketContext);\n\n\tconst [text, setText] = useState(\"\");\n\tconst [userTyping, setUserTyping] = useState(false);\n\n\tconst colors = getColors();\n\n\tuseEffect(() => {\n\t\tif (!socket || !chat) return;\n\t\tif (text.length === 0) {\n\t\t\tsocket.emit(\"userTyping\", {\n\t\t\t\troom: chat.id,\n\t\t\t\ttyping: false,\n\t\t\t\tuserId: user.id,\n\t\t\t});\n\t\t} else {\n\t\t\tsocket.emit(\"userTyping\", {\n\t\t\t\troom: chat.id,\n\t\t\t\ttyping: true,\n\t\t\t\tuserId: user.id,\n\t\t\t});\n\t\t}\n\n\t\tsocket.on(\"userTyping\", (t) => {\n\t\t\tif (t.userId === user.id) return;\n\t\t\tsetUserTyping(t.typing);\n\t\t});\n\t}, [text]);\n\n\tfunction sendMessage() {\n\t\tif (!text) return;\n\t\tnew SocketController.sendMessage({\n\t\t\tuser,\n\t\t\tchats,\n\t\t\tupdateChats,\n\t\t\tchat,\n\t\t\tsocket,\n\t\t\ttext,\n\t\t});\n\t\tsetText(\"\");\n\t}\n\n\treturn (\n\t\t<View\n\t\t\tstyle={[\n\t\t\t\tstyles.bottomContainer,\n\t\t\t\t{ backgroundColor: colors.defaultColors.card },\n\t\t\t]}\n\t\t>\n\t\t\t<View style={styles.buttonContentLeft}>\n\t\t\t\t<TouchableOpacity style={styles.blueButton} onPress={() => {}}>\n\t\t\t\t\t<Fontisto name=\"camera\" size={20} color=\"white\" />\n\t\t\t\t</TouchableOpacity>\n\t\t\t\t<TextInput\n\t\t\t\t\tstyle={styles.inputMessage}\n\t\t\t\t\tplaceholder=\"Mensagem...\"\n\t\t\t\t\tvalue={text}\n\t\t\t\t\tonChangeText={(value) => setText(value)}\n\t\t\t\t\tonSubmitEditing={() => sendMessage()}\n\t\t\t\t\tmaxLength={4100}\n\t\t\t\t\tautoFocus={true}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t\t{text ? (\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tstyle={styles.blueButton}\n\t\t\t\t\tonPress={() => sendMessage()}\n\t\t\t\t>\n\t\t\t\t\t<FontAwesome name=\"send\" size={24} color=\"white\" />\n\t\t\t\t</TouchableOpacity>\n\t\t\t) : (\n\t\t\t\t<View style={styles.othersMedias}>\n\t\t\t\t\t<TouchableOpacity onPress={() => {}}>\n\t\t\t\t\t\t<Ionicons\n\t\t\t\t\t\t\tname=\"ios-add-circle-outline\"\n\t\t\t\t\t\t\tsize={26}\n\t\t\t\t\t\t\tcolor={colors.tint}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tstyle={{ marginLeft: 8 }}\n\t\t\t\t\t\tonPress={() => {}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MaterialIcons\n\t\t\t\t\t\t\tname=\"keyboard-voice\"\n\t\t\t\t\t\t\tsize={26}\n\t\t\t\t\t\t\tcolor={colors.tint}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t)}\n\t\t</View>\n\t);\n}\n\nconst styles = StyleSheet.create({\n\tbottomContainer: {\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t\tposition: \"absolute\",\n\t\tbackgroundColor: \"rgb(18, 18, 18)\",\n\t\tjustifyContent: \"space-between\",\n\t\tborderRadius: 50,\n\t\tbottom: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\tpadding: 5,\n\t\tmargin: 5,\n\t},\n\tbutton: {\n\t\tpadding: 5,\n\t},\n\tbuttonContentLeft: {\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"space-between\",\n\t\twidth: \"80%\",\n\t},\n\tblueButton: {\n\t\tbackgroundColor: \"#2f95dc\",\n\t\tpadding: 8,\n\t\tborderRadius: 100,\n\t},\n\tothersMedias: {\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t},\n\tinputMessage: {\n\t\tpaddingVertical: 8,\n\t\twidth: \"100%\",\n\t\tmarginLeft: 10,\n\t},\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}