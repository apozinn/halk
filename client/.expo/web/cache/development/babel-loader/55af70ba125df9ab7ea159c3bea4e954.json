{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Ionicons, FontAwesome, MaterialIcons, Fontisto } from \"@expo/vector-icons\";\nimport { TextInput } from \"./Themed\";\nimport { getColors } from \"../../constants/Colors\";\nimport { UserContext } from \"../contexts/user\";\nimport { ChatsContext } from \"../contexts/chats\";\nimport { SocketContext } from \"../contexts/socket\";\nimport { SocketController } from \"../utils/socket\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function BottomContent(_ref) {\n  var chat = _ref.chat;\n  var _useContext = useContext(UserContext),\n    user = _useContext.user;\n  var _useContext2 = useContext(ChatsContext),\n    chats = _useContext2.chats,\n    updateChats = _useContext2.updateChats;\n  var socket = useContext(SocketContext);\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    text = _useState2[0],\n    setText = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userTyping = _useState4[0],\n    setUserTyping = _useState4[1];\n  var colors = getColors();\n  useEffect(function () {\n    if (!socket || !chat) return;\n    if (text.length === 0) {\n      socket.emit(\"userTyping\", {\n        room: chat.id,\n        typing: false,\n        userId: user.id\n      });\n    } else {\n      socket.emit(\"userTyping\", {\n        room: chat.id,\n        typing: true,\n        userId: user.id\n      });\n    }\n    socket.on(\"userTyping\", function (t) {\n      if (t.userId === user.id) return;\n      setUserTyping(t.typing);\n    });\n  }, [text]);\n  function sendMessage() {\n    if (!text) return;\n    new SocketController.sendMessage({\n      user: user,\n      chats: chats,\n      updateChats: updateChats,\n      chat: chat,\n      socket: socket,\n      text: text\n    });\n    setText(\"\");\n  }\n  return _jsxs(View, {\n    style: [styles.bottomContainer, {\n      backgroundColor: colors.defaultColors.card\n    }],\n    children: [_jsxs(View, {\n      style: styles.buttonContentLeft,\n      children: [_jsx(TouchableOpacity, {\n        style: styles.blueButton,\n        onPress: function onPress() {},\n        children: _jsx(Fontisto, {\n          name: \"camera\",\n          size: 20,\n          color: \"white\"\n        })\n      }), _jsx(TextInput, {\n        style: styles.inputMessage,\n        placeholder: \"Mensagem...\",\n        value: text,\n        onChangeText: function onChangeText(value) {\n          return setText(value);\n        },\n        onSubmitEditing: function onSubmitEditing() {\n          return sendMessage();\n        },\n        maxLength: 4100,\n        autoFocus: true\n      })]\n    }), text ? _jsx(TouchableOpacity, {\n      style: styles.blueButton,\n      onPress: function onPress() {\n        return sendMessage();\n      },\n      children: _jsx(FontAwesome, {\n        name: \"send\",\n        size: 24,\n        color: \"white\"\n      })\n    }) : _jsxs(View, {\n      style: styles.othersMedias,\n      children: [_jsx(TouchableOpacity, {\n        onPress: function onPress() {},\n        children: _jsx(Ionicons, {\n          name: \"ios-add-circle-outline\",\n          size: 26,\n          color: colors.tint\n        })\n      }), _jsx(TouchableOpacity, {\n        style: {\n          marginLeft: 8\n        },\n        onPress: function onPress() {},\n        children: _jsx(MaterialIcons, {\n          name: \"keyboard-voice\",\n          size: 26,\n          color: colors.tint\n        })\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  bottomContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    position: \"absolute\",\n    backgroundColor: \"rgb(18, 18, 18)\",\n    justifyContent: \"space-between\",\n    borderRadius: 50,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    padding: 5,\n    margin: 5\n  },\n  button: {\n    padding: 5\n  },\n  buttonContentLeft: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    width: \"80%\"\n  },\n  blueButton: {\n    backgroundColor: \"#2f95dc\",\n    padding: 8,\n    borderRadius: 100\n  },\n  othersMedias: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  inputMessage: {\n    paddingVertical: 8,\n    width: \"100%\",\n    marginLeft: 10\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","useContext","Ionicons","FontAwesome","MaterialIcons","Fontisto","TextInput","getColors","UserContext","ChatsContext","SocketContext","SocketController","BottomContent","chat","user","chats","updateChats","socket","text","setText","userTyping","setUserTyping","colors","length","emit","room","id","typing","userId","on","t","sendMessage","styles","bottomContainer","backgroundColor","defaultColors","card","buttonContentLeft","blueButton","inputMessage","value","othersMedias","tint","marginLeft","StyleSheet","create","flexDirection","alignItems","position","justifyContent","borderRadius","bottom","left","right","padding","margin","button","width","paddingVertical"],"sources":["/home/samuel/Documentos/projetos/mobile/halk/client/src/components/bottomContent.tsx"],"sourcesContent":["import React, { useEffect, useState, useContext, useRef } from \"react\";\nimport { Button, StyleSheet, View, TouchableOpacity } from \"react-native\";\nimport {\n\tAntDesign,\n\tIonicons,\n\tFeather,\n\tFontAwesome,\n\tMaterialIcons,\n\tFontisto,\n} from \"@expo/vector-icons\";\nimport { TextInput, Text } from \"./Themed\";\nimport { getColors } from \"../../constants/Colors\";\nimport { UserContext } from \"../contexts/user\";\nimport { ChatsContext } from \"../contexts/chats\";\nimport { SocketContext } from \"../contexts/socket\";\nimport { SocketController } from \"../utils/socket\";\n\nexport default function BottomContent({ chat }) {\n\tconst { user } = useContext(UserContext);\n\tconst { chats, updateChats } = useContext(ChatsContext);\n\tconst socket = useContext(SocketContext);\n\n\tconst [text, setText] = useState(\"\");\n\tconst [userTyping, setUserTyping] = useState(false);\n\n\tconst colors = getColors();\n\n\tuseEffect(() => {\n\t\tif (!socket || !chat) return;\n\t\tif (text.length === 0) {\n\t\t\tsocket.emit(\"userTyping\", {\n\t\t\t\troom: chat.id,\n\t\t\t\ttyping: false,\n\t\t\t\tuserId: user.id,\n\t\t\t});\n\t\t} else {\n\t\t\tsocket.emit(\"userTyping\", {\n\t\t\t\troom: chat.id,\n\t\t\t\ttyping: true,\n\t\t\t\tuserId: user.id,\n\t\t\t});\n\t\t}\n\n\t\tsocket.on(\"userTyping\", (t) => {\n\t\t\tif (t.userId === user.id) return;\n\t\t\tsetUserTyping(t.typing);\n\t\t});\n\t}, [text]);\n\n\tfunction sendMessage() {\n\t\tif (!text) return;\n\t\tnew SocketController.sendMessage({\n\t\t\tuser,\n\t\t\tchats,\n\t\t\tupdateChats,\n\t\t\tchat,\n\t\t\tsocket,\n\t\t\ttext,\n\t\t});\n\t\tsetText(\"\");\n\t}\n\n\treturn (\n\t\t<View\n\t\t\tstyle={[\n\t\t\t\tstyles.bottomContainer,\n\t\t\t\t{ backgroundColor: colors.defaultColors.card },\n\t\t\t]}\n\t\t>\n\t\t\t<View style={styles.buttonContentLeft}>\n\t\t\t\t<TouchableOpacity style={styles.blueButton} onPress={() => {}}>\n\t\t\t\t\t<Fontisto name=\"camera\" size={20} color=\"white\" />\n\t\t\t\t</TouchableOpacity>\n\t\t\t\t<TextInput\n\t\t\t\t\tstyle={styles.inputMessage}\n\t\t\t\t\tplaceholder=\"Mensagem...\"\n\t\t\t\t\tvalue={text}\n\t\t\t\t\tonChangeText={(value) => setText(value)}\n\t\t\t\t\tonSubmitEditing={() => sendMessage()}\n\t\t\t\t\tmaxLength={4100}\n\t\t\t\t\tautoFocus={true}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t\t{text ? (\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tstyle={styles.blueButton}\n\t\t\t\t\tonPress={() => sendMessage()}\n\t\t\t\t>\n\t\t\t\t\t<FontAwesome name=\"send\" size={24} color=\"white\" />\n\t\t\t\t</TouchableOpacity>\n\t\t\t) : (\n\t\t\t\t<View style={styles.othersMedias}>\n\t\t\t\t\t<TouchableOpacity onPress={() => {}}>\n\t\t\t\t\t\t<Ionicons\n\t\t\t\t\t\t\tname=\"ios-add-circle-outline\"\n\t\t\t\t\t\t\tsize={26}\n\t\t\t\t\t\t\tcolor={colors.tint}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tstyle={{ marginLeft: 8 }}\n\t\t\t\t\t\tonPress={() => {}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MaterialIcons\n\t\t\t\t\t\t\tname=\"keyboard-voice\"\n\t\t\t\t\t\t\tsize={26}\n\t\t\t\t\t\t\tcolor={colors.tint}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t)}\n\t\t</View>\n\t);\n}\n\nconst styles = StyleSheet.create({\n\tbottomContainer: {\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t\tposition: \"absolute\",\n\t\tbackgroundColor: \"rgb(18, 18, 18)\",\n\t\tjustifyContent: \"space-between\",\n\t\tborderRadius: 50,\n\t\tbottom: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\tpadding: 5,\n\t\tmargin: 5,\n\t},\n\tbutton: {\n\t\tpadding: 5,\n\t},\n\tbuttonContentLeft: {\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"space-between\",\n\t\twidth: \"80%\",\n\t},\n\tblueButton: {\n\t\tbackgroundColor: \"#2f95dc\",\n\t\tpadding: 8,\n\t\tborderRadius: 100,\n\t},\n\tothersMedias: {\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t},\n\tinputMessage: {\n\t\tpaddingVertical: 8,\n\t\twidth: \"100%\",\n\t\tmarginLeft: 10,\n\t},\n});\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,QAAgB,OAAO;AAAC;AAAA;AAAA;AAEvE,SAECC,QAAQ,EAERC,WAAW,EACXC,aAAa,EACbC,QAAQ,QACF,oBAAoB;AAC3B,SAASC,SAAS;AAClB,SAASC,SAAS;AAClB,SAASC,WAAW;AACpB,SAASC,YAAY;AACrB,SAASC,aAAa;AACtB,SAASC,gBAAgB;AAA0B;AAAA;AAEnD,eAAe,SAASC,aAAa,OAAW;EAAA,IAARC,IAAI,QAAJA,IAAI;EAC3C,kBAAiBZ,UAAU,CAACO,WAAW,CAAC;IAAhCM,IAAI,eAAJA,IAAI;EACZ,mBAA+Bb,UAAU,CAACQ,YAAY,CAAC;IAA/CM,KAAK,gBAALA,KAAK;IAAEC,WAAW,gBAAXA,WAAW;EAC1B,IAAMC,MAAM,GAAGhB,UAAU,CAACS,aAAa,CAAC;EAExC,gBAAwBV,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7BkB,IAAI;IAAEC,OAAO;EACpB,iBAAoCnB,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA5CoB,UAAU;IAAEC,aAAa;EAEhC,IAAMC,MAAM,GAAGf,SAAS,EAAE;EAE1BR,SAAS,CAAC,YAAM;IACf,IAAI,CAACkB,MAAM,IAAI,CAACJ,IAAI,EAAE;IACtB,IAAIK,IAAI,CAACK,MAAM,KAAK,CAAC,EAAE;MACtBN,MAAM,CAACO,IAAI,CAAC,YAAY,EAAE;QACzBC,IAAI,EAAEZ,IAAI,CAACa,EAAE;QACbC,MAAM,EAAE,KAAK;QACbC,MAAM,EAAEd,IAAI,CAACY;MACd,CAAC,CAAC;IACH,CAAC,MAAM;MACNT,MAAM,CAACO,IAAI,CAAC,YAAY,EAAE;QACzBC,IAAI,EAAEZ,IAAI,CAACa,EAAE;QACbC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAEd,IAAI,CAACY;MACd,CAAC,CAAC;IACH;IAEAT,MAAM,CAACY,EAAE,CAAC,YAAY,EAAE,UAACC,CAAC,EAAK;MAC9B,IAAIA,CAAC,CAACF,MAAM,KAAKd,IAAI,CAACY,EAAE,EAAE;MAC1BL,aAAa,CAACS,CAAC,CAACH,MAAM,CAAC;IACxB,CAAC,CAAC;EACH,CAAC,EAAE,CAACT,IAAI,CAAC,CAAC;EAEV,SAASa,WAAW,GAAG;IACtB,IAAI,CAACb,IAAI,EAAE;IACX,IAAIP,gBAAgB,CAACoB,WAAW,CAAC;MAChCjB,IAAI,EAAJA,IAAI;MACJC,KAAK,EAALA,KAAK;MACLC,WAAW,EAAXA,WAAW;MACXH,IAAI,EAAJA,IAAI;MACJI,MAAM,EAANA,MAAM;MACNC,IAAI,EAAJA;IACD,CAAC,CAAC;IACFC,OAAO,CAAC,EAAE,CAAC;EACZ;EAEA,OACC,MAAC,IAAI;IACJ,KAAK,EAAE,CACNa,MAAM,CAACC,eAAe,EACtB;MAAEC,eAAe,EAAEZ,MAAM,CAACa,aAAa,CAACC;IAAK,CAAC,CAC7C;IAAA,WAEF,MAAC,IAAI;MAAC,KAAK,EAAEJ,MAAM,CAACK,iBAAkB;MAAA,WACrC,KAAC,gBAAgB;QAAC,KAAK,EAAEL,MAAM,CAACM,UAAW;QAAC,OAAO,EAAE,mBAAM,CAAC,CAAE;QAAA,UAC7D,KAAC,QAAQ;UAAC,IAAI,EAAC,QAAQ;UAAC,IAAI,EAAE,EAAG;UAAC,KAAK,EAAC;QAAO;MAAG,EAChC,EACnB,KAAC,SAAS;QACT,KAAK,EAAEN,MAAM,CAACO,YAAa;QAC3B,WAAW,EAAC,aAAa;QACzB,KAAK,EAAErB,IAAK;QACZ,YAAY,EAAE,sBAACsB,KAAK;UAAA,OAAKrB,OAAO,CAACqB,KAAK,CAAC;QAAA,CAAC;QACxC,eAAe,EAAE;UAAA,OAAMT,WAAW,EAAE;QAAA,CAAC;QACrC,SAAS,EAAE,IAAK;QAChB,SAAS,EAAE;MAAK,EACf;IAAA,EACI,EACNb,IAAI,GACJ,KAAC,gBAAgB;MAChB,KAAK,EAAEc,MAAM,CAACM,UAAW;MACzB,OAAO,EAAE;QAAA,OAAMP,WAAW,EAAE;MAAA,CAAC;MAAA,UAE7B,KAAC,WAAW;QAAC,IAAI,EAAC,MAAM;QAAC,IAAI,EAAE,EAAG;QAAC,KAAK,EAAC;MAAO;IAAG,EACjC,GAEnB,MAAC,IAAI;MAAC,KAAK,EAAEC,MAAM,CAACS,YAAa;MAAA,WAChC,KAAC,gBAAgB;QAAC,OAAO,EAAE,mBAAM,CAAC,CAAE;QAAA,UACnC,KAAC,QAAQ;UACR,IAAI,EAAC,wBAAwB;UAC7B,IAAI,EAAE,EAAG;UACT,KAAK,EAAEnB,MAAM,CAACoB;QAAK;MAClB,EACgB,EACnB,KAAC,gBAAgB;QAChB,KAAK,EAAE;UAAEC,UAAU,EAAE;QAAE,CAAE;QACzB,OAAO,EAAE,mBAAM,CAAC,CAAE;QAAA,UAElB,KAAC,aAAa;UACb,IAAI,EAAC,gBAAgB;UACrB,IAAI,EAAE,EAAG;UACT,KAAK,EAAErB,MAAM,CAACoB;QAAK;MAClB,EACgB;IAAA,EAEpB;EAAA,EACK;AAET;AAEA,IAAMV,MAAM,GAAGY,UAAU,CAACC,MAAM,CAAC;EAChCZ,eAAe,EAAE;IAChBa,aAAa,EAAE,KAAK;IACpBC,UAAU,EAAE,QAAQ;IACpBC,QAAQ,EAAE,UAAU;IACpBd,eAAe,EAAE,iBAAiB;IAClCe,cAAc,EAAE,eAAe;IAC/BC,YAAY,EAAE,EAAE;IAChBC,MAAM,EAAE,CAAC;IACTC,IAAI,EAAE,CAAC;IACPC,KAAK,EAAE,CAAC;IACRC,OAAO,EAAE,CAAC;IACVC,MAAM,EAAE;EACT,CAAC;EACDC,MAAM,EAAE;IACPF,OAAO,EAAE;EACV,CAAC;EACDjB,iBAAiB,EAAE;IAClBS,aAAa,EAAE,KAAK;IACpBC,UAAU,EAAE,QAAQ;IACpBE,cAAc,EAAE,eAAe;IAC/BQ,KAAK,EAAE;EACR,CAAC;EACDnB,UAAU,EAAE;IACXJ,eAAe,EAAE,SAAS;IAC1BoB,OAAO,EAAE,CAAC;IACVJ,YAAY,EAAE;EACf,CAAC;EACDT,YAAY,EAAE;IACbK,aAAa,EAAE,KAAK;IACpBC,UAAU,EAAE;EACb,CAAC;EACDR,YAAY,EAAE;IACbmB,eAAe,EAAE,CAAC;IAClBD,KAAK,EAAE,MAAM;IACbd,UAAU,EAAE;EACb;AACD,CAAC,CAAC"},"metadata":{},"sourceType":"module"}